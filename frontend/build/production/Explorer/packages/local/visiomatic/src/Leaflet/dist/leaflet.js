!function(l,j,f){function d(){var a=l.L;c.noConflict=function(){return l.L=a,this},l.L=c}var c={version:"1.0.0-rc.1+b2d7cf1"};"object"==typeof module&&"object"==typeof module.exports?module.exports=c:"function"==typeof define&&define.amd&&define(c),"undefined"!=typeof l&&d(),c.Util={extend:function(h){var p,a,r,q;for(a=1,r=arguments.length;a<r;a++){q=arguments[a];for(p in q){h[p]=q[p]}}return h},create:Object.create||function(){function a(){}return function(h){return a.prototype=h,new a}}(),bind:function(h,o){var a=Array.prototype.slice;if(h.bind){return h.bind.apply(h,a.call(arguments,1))}var p=a.call(arguments,2);return function(){return h.apply(o,p.length?p.concat(a.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++c.Util.lastId,a._leaflet_id},lastId:0,throttle:function(h,u,a){var w,v,p,q;return q=function(){w=!1,v&&(p.apply(a,v),v=!1)},p=function(){w?v=arguments:(h.apply(a,arguments),setTimeout(q,u),w=!0)}},wrapNum:function(h,q,a){var u=q[1],r=q[0],p=u-r;return h===u&&a?h:((h-r)%p+p)%p+r},falseFn:function(){return !1},formatNum:function(h,n){var a=Math.pow(10,n||5);return Math.round(h*a)/a},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return c.Util.trim(a).split(/\s+/)},setOptions:function(h,n){h.hasOwnProperty("options")||(h.options=h.options?c.Util.create(h.options):{});for(var a in n){h.options[a]=n[a]}return h.options},getParamString:function(h,p,a){var r=[];for(var q in h){r.push(encodeURIComponent(a?q.toUpperCase():q)+"="+encodeURIComponent(h[q]))}return(p&&p.indexOf("?")!==-1?"&":"?")+r.join("&")},template:function(a,h){return a.replace(c.Util.templateRe,function(e,p){var i=h[p];if(i===f){throw new Error("No value provided for variable "+e)}return"function"==typeof i&&(i=i(h)),i})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(h,n){for(var a=0;a<h.length;a++){if(h[a]===n){return a}}return -1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function p(i){return l["webkit"+i]||l["moz"+i]||l["ms"+i]}function a(r){var n=+new Date,s=Math.max(0,16-(n-q));return q=n+s,l.setTimeout(r,s)}var q=0,h=l.requestAnimationFrame||p("RequestAnimationFrame")||a,o=l.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(i){l.clearTimeout(i)};c.Util.requestAnimFrame=function(s,t,i){return i&&h===a?void s.call(t):h.call(l,c.bind(s,t))},c.Util.cancelAnimFrame=function(i){i&&o.call(l,i)}}(),c.extend=c.Util.extend,c.bind=c.Util.bind,c.stamp=c.Util.stamp,c.setOptions=c.Util.setOptions,c.Class=function(){},c.Class.extend=function(h){var p=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=p.__super__=this.prototype,q=c.Util.create(a);q.constructor=p,p.prototype=q;for(var o in this){this.hasOwnProperty(o)&&"prototype"!==o&&(p[o]=this[o])}return h.statics&&(c.extend(p,h.statics),delete h.statics),h.includes&&(c.Util.extend.apply(null,[q].concat(h.includes)),delete h.includes),q.options&&(h.options=c.Util.extend(c.Util.create(q.options),h.options)),c.extend(q,h),q._initHooks=[],q.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var i=0,n=q._initHooks.length;i<n;i++){q._initHooks[i].call(this)}}},p},c.Class.include=function(a){return c.extend(this.prototype,a),this},c.Class.mergeOptions=function(a){return c.extend(this.prototype.options,a),this},c.Class.addInitHook=function(h){var n=Array.prototype.slice.call(arguments,1),a="function"==typeof h?h:function(){this[h].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this},c.Evented=c.Class.extend({on:function(h,q,a){if("object"==typeof h){for(var u in h){this._on(u,h[u],q)}}else{h=c.Util.splitWords(h);for(var o=0,p=h.length;o<p;o++){this._on(h[o],q,a)}}return this},off:function(h,q,a){if(h){if("object"==typeof h){for(var u in h){this._off(u,h[u],q)}}else{h=c.Util.splitWords(h);for(var o=0,p=h.length;o<p;o++){this._off(h[o],q,a)}}}else{delete this._events}return this},_on:function(y,w,u){var p=this._events=this._events||{},z=u&&u!==this&&c.stamp(u);if(z){var o=y+"_idx",x=y+"_len",v=p[o]=p[o]||{},q=c.stamp(w)+"_"+z;v[q]||(v[q]={fn:w,ctx:u},p[x]=(p[x]||0)+1)}else{p[y]=p[y]||[],p[y].push({fn:w})}},_off:function(C,x,v){var p,D,o,A,w=this._events,q=C+"_idx",B=C+"_len";if(w){if(!x){D=w[q];for(o in D){D[o].fn=c.Util.falseFn}for(D=w[C]||[],o=0,A=D.length;o<A;o++){D[o].fn=c.Util.falseFn}return delete w[C],delete w[q],void delete w[B]}var z,y=v&&v!==this&&c.stamp(v);if(y){z=c.stamp(x)+"_"+y,D=w[q],D&&D[z]&&(p=D[z],delete D[z],w[B]--)}else{if(D=w[C]){for(o=0,A=D.length;o<A;o++){if(D[o].fn===x){p=D[o],D.splice(o,1);break}}}}p&&(p.fn=c.Util.falseFn)}},fire:function(A,x,v){if(!this.listens(A,v)){return this}var p=c.Util.extend({},x,{type:A,target:this}),B=this._events;if(B){var o,y,w,q,z=B[A+"_idx"];if(B[A]){for(w=B[A].slice(),o=0,y=w.length;o<y;o++){w[o].fn.call(this,p)}}for(q in z){z[q].fn.call(z[q].ctx,p)}}return v&&this._propagateEvent(p),this},listens:function(h,o){var a=this._events;if(a&&(a[h]||a[h+"_len"])){return !0}if(o){for(var p in this._eventParents){if(this._eventParents[p].listens(h,o)){return !0}}}return !1},once:function(h,p,a){if("object"==typeof h){for(var q in h){this.once(q,h[q],p)}return this}var o=c.bind(function(){this.off(h,p,a).off(h,o,a)},this);return this.on(h,p,a).on(h,o,a)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[c.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[c.stamp(a)],this},_propagateEvent:function(a){for(var h in this._eventParents){this._eventParents[h].fire(a.type,c.extend({layer:a.target},a),!0)}}});var m=c.Evented.prototype;m.addEventListener=m.on,m.removeEventListener=m.clearAllEventListeners=m.off,m.addOneTimeEventListener=m.once,m.fireEvent=m.fire,m.hasEventListeners=m.listens,c.Mixin={Events:m},function(){var x=navigator.userAgent.toLowerCase(),q=j.documentElement,J="ActiveXObject" in l,e=x.indexOf("webkit")!==-1,F=x.indexOf("phantom")!==-1,z=x.search("android [23]")!==-1,w=x.indexOf("chrome")!==-1,I=x.indexOf("gecko")!==-1&&!e&&!l.opera&&!J,D=0===navigator.platform.indexOf("Win"),C="undefined"!=typeof orientation||x.indexOf("mobile")!==-1,H=!l.PointerEvent&&l.MSPointerEvent,t=l.PointerEvent||H,o=J&&"transition" in q.style,B="WebKitCSSMatrix" in l&&"m11" in new l.WebKitCSSMatrix&&!z,A="MozPerspective" in q.style,G="OTransition" in q.style,E=!l.L_NO_TOUCH&&(t||"ontouchstart" in l||l.DocumentTouch&&j instanceof l.DocumentTouch);c.Browser={ie:J,ielt9:J&&!j.addEventListener,edge:"msLaunchUri" in navigator&&!("documentMode" in j),webkit:e,gecko:I,android:x.indexOf("android")!==-1,android23:z,chrome:w,safari:!w&&x.indexOf("safari")!==-1,win:D,ie3d:o,webkit3d:B,gecko3d:A,opera12:G,any3d:!l.L_DISABLE_3D&&(o||B||A)&&!G&&!F,mobile:C,mobileWebkit:C&&e,mobileWebkit3d:C&&B,mobileOpera:C&&l.opera,mobileGecko:C&&I,touch:!!E,msPointer:!!H,pointer:!!t,retina:(l.devicePixelRatio||l.screen.deviceXDPI/l.screen.logicalXDPI)>1}}(),c.Point=function(h,n,a){this.x=a?Math.round(h):h,this.y=a?Math.round(n):n},c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(a){return this.clone()._add(c.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(c.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new c.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new c.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(h){h=c.point(h);var n=h.x-this.x,a=h.y-this.y;return Math.sqrt(n*n+a*a)},equals:function(a){return a=c.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=c.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}},c.point=function(a,h,i){return a instanceof c.Point?a:c.Util.isArray(a)?new c.Point(a[0],a[1]):a===f||null===a?a:"object"==typeof a&&"x" in a&&"y" in a?new c.Point(a.x,a.y):new c.Point(a,h,i)},c.Bounds=function(h,p){if(h){for(var a=p?[h,p]:h,r=0,q=a.length;r<q;r++){this.extend(a[r])}}},c.Bounds.prototype={extend:function(a){return a=c.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var n,a;return h="number"==typeof h[0]||h instanceof c.Point?c.point(h):c.bounds(h),h instanceof c.Bounds?(n=h.min,a=h.max):n=a=h,n.x>=this.min.x&&a.x<=this.max.x&&n.y>=this.min.y&&a.y<=this.max.y},intersects:function(p){p=c.bounds(p);var v=this.min,o=this.max,w=p.min,q=p.max,u=q.x>=v.x&&w.x<=o.x,h=q.y>=v.y&&w.y<=o.y;return u&&h},overlaps:function(p){p=c.bounds(p);var v=this.min,o=this.max,w=p.min,q=p.max,u=q.x>v.x&&w.x<o.x,h=q.y>v.y&&w.y<o.y;return u&&h},isValid:function(){return !(!this.min||!this.max)}},c.bounds=function(a,h){return !a||a instanceof c.Bounds?a:new c.Bounds(a,h)},c.Transformation=function(h,o,a,p){this._a=h,this._b=o,this._c=a,this._d=p},c.Transformation.prototype={transform:function(a,h){return this._transform(a.clone(),h)},_transform:function(a,h){return h=h||1,a.x=h*(this._a*a.x+this._b),a.y=h*(this._c*a.y+this._d),a},untransform:function(a,h){return h=h||1,new c.Point((a.x/h-this._b)/this._a,(a.y/h-this._d)/this._c)}},c.DomUtil={get:function(a){return"string"==typeof a?j.getElementById(a):a},getStyle:function(e,a){var p=e.style[a]||e.currentStyle&&e.currentStyle[a];if((!p||"auto"===p)&&j.defaultView){var h=j.defaultView.getComputedStyle(e,null);p=h?h[a]:null}return"auto"===p?null:p},create:function(e,a,p){var h=j.createElement(e);return h.className=a||"",p&&p.appendChild(h),h},remove:function(a){var h=a.parentNode;h&&h.removeChild(a)},empty:function(a){for(;a.firstChild;){a.removeChild(a.firstChild)}},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var h=a.parentNode;h.insertBefore(a,h.firstChild)},hasClass:function(a,h){if(a.classList!==f){return a.classList.contains(h)}var i=c.DomUtil.getClass(a);return i.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(i)},addClass:function(i,q){if(i.classList!==f){for(var u=c.Util.splitWords(q),o=0,p=u.length;o<p;o++){i.classList.add(u[o])}}else{if(!c.DomUtil.hasClass(i,q)){var h=c.DomUtil.getClass(i);c.DomUtil.setClass(i,(h?h+" ":"")+q)}}},removeClass:function(a,h){a.classList!==f?a.classList.remove(h):c.DomUtil.setClass(a,c.Util.trim((" "+c.DomUtil.getClass(a)+" ").replace(" "+h+" "," ")))},setClass:function(a,h){a.className.baseVal===f?a.className=h:a.className.baseVal=h},getClass:function(a){return a.className.baseVal===f?a.className:a.className.baseVal},setOpacity:function(a,h){"opacity" in a.style?a.style.opacity=h:"filter" in a.style&&c.DomUtil._setOpacityIE(a,h)},_setOpacityIE:function(h,p){var a=!1,r="DXImageTransform.Microsoft.Alpha";try{a=h.filters.item(r)}catch(q){if(1===p){return}}p=Math.round(100*p),a?(a.Enabled=100!==p,a.Opacity=p):h.style.filter+=" progid:"+r+"(opacity="+p+")"},testProp:function(e){for(var a=j.documentElement.style,h=0;h<e.length;h++){if(e[h] in a){return e[h]}}return !1},setTransform:function(h,o,a){var p=o||new c.Point(0,0);h.style[c.DomUtil.TRANSFORM]=(c.Browser.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(a?" scale("+a+")":"")},setPosition:function(a,h){a._leaflet_pos=h,c.Browser.any3d?c.DomUtil.setTransform(a,h):(a.style.left=h.x+"px",a.style.top=h.y+"px")},getPosition:function(a){return a._leaflet_pos||new c.Point(0,0)}},function(){c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var a=c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(c.DomUtil.TRANSITION_END="webkitTransition"===a||"OTransition"===a?a+"End":"transitionend","onselectstart" in j){c.DomUtil.disableTextSelection=function(){c.DomEvent.on(l,"selectstart",c.DomEvent.preventDefault)},c.DomUtil.enableTextSelection=function(){c.DomEvent.off(l,"selectstart",c.DomEvent.preventDefault)}}else{var e=c.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);c.DomUtil.disableTextSelection=function(){if(e){var h=j.documentElement.style;this._userSelect=h[e],h[e]="none"}},c.DomUtil.enableTextSelection=function(){e&&(j.documentElement.style[e]=this._userSelect,delete this._userSelect)}}c.DomUtil.disableImageDrag=function(){c.DomEvent.on(l,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.enableImageDrag=function(){c.DomEvent.off(l,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.preventOutline=function(h){for(;h.tabIndex===-1;){h=h.parentNode}h&&h.style&&(c.DomUtil.restoreOutline(),this._outlineElement=h,this._outlineStyle=h.style.outline,h.style.outline="none",c.DomEvent.on(l,"keydown",c.DomUtil.restoreOutline,this))},c.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,c.DomEvent.off(l,"keydown",c.DomUtil.restoreOutline,this))}}(),c.LatLng=function(a,h,i){if(isNaN(a)||isNaN(h)){throw new Error("Invalid LatLng object: ("+a+", "+h+")")}this.lat=+a,this.lng=+h,i!==f&&(this.alt=+i)},c.LatLng.prototype={equals:function(a,h){if(!a){return !1}a=c.latLng(a);var i=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return i<=(h===f?1e-9:h)},toString:function(a){return"LatLng("+c.Util.formatNum(this.lat,a)+", "+c.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return c.CRS.Earth.distance(this,c.latLng(a))},wrap:function(){return c.CRS.Earth.wrapLatLng(this)},toBounds:function(h){var n=180*h/40075017,a=n/Math.cos(Math.PI/180*this.lat);return c.latLngBounds([this.lat-n,this.lng-a],[this.lat+n,this.lng+a])},clone:function(){return new c.LatLng(this.lat,this.lng,this.alt)}},c.latLng=function(a,h,i){return a instanceof c.LatLng?a:c.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new c.LatLng(a[0],a[1],a[2]):2===a.length?new c.LatLng(a[0],a[1]):null:a===f||null===a?a:"object"==typeof a&&"lat" in a?new c.LatLng(a.lat,"lng" in a?a.lng:a.lon,a.alt):h===f?null:new c.LatLng(a,h,i)},c.LatLngBounds=function(h,p){if(h){for(var a=p?[h,p]:h,r=0,q=a.length;r<q;r++){this.extend(a[r])}}},c.LatLngBounds.prototype={extend:function(h){var p,a,q=this._southWest,o=this._northEast;if(h instanceof c.LatLng){p=h,a=h}else{if(!(h instanceof c.LatLngBounds)){return h?this.extend(c.latLng(h)||c.latLngBounds(h)):this}if(p=h._southWest,a=h._northEast,!p||!a){return this}}return q||o?(q.lat=Math.min(p.lat,q.lat),q.lng=Math.min(p.lng,q.lng),o.lat=Math.max(a.lat,o.lat),o.lng=Math.max(a.lng,o.lng)):(this._southWest=new c.LatLng(p.lat,p.lng),this._northEast=new c.LatLng(a.lat,a.lng)),this},pad:function(h){var p=this._southWest,a=this._northEast,q=Math.abs(p.lat-a.lat)*h,o=Math.abs(p.lng-a.lng)*h;return new c.LatLngBounds(new c.LatLng(p.lat-q,p.lng-o),new c.LatLng(a.lat+q,a.lng+o))},getCenter:function(){return new c.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){h="number"==typeof h[0]||h instanceof c.LatLng?c.latLng(h):c.latLngBounds(h);var p,a,q=this._southWest,o=this._northEast;return h instanceof c.LatLngBounds?(p=h.getSouthWest(),a=h.getNorthEast()):p=a=h,p.lat>=q.lat&&a.lat<=o.lat&&p.lng>=q.lng&&a.lng<=o.lng},intersects:function(p){p=c.latLngBounds(p);var v=this._southWest,o=this._northEast,w=p.getSouthWest(),q=p.getNorthEast(),u=q.lat>=v.lat&&w.lat<=o.lat,h=q.lng>=v.lng&&w.lng<=o.lng;return u&&h},overlaps:function(p){p=c.latLngBounds(p);var v=this._southWest,o=this._northEast,w=p.getSouthWest(),q=p.getNorthEast(),u=q.lat>v.lat&&w.lat<o.lat,h=q.lng>v.lng&&w.lng<o.lng;return u&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return !!a&&(a=c.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return !(!this._southWest||!this._northEast)}},c.latLngBounds=function(a,h){return a instanceof c.LatLngBounds?a:new c.LatLngBounds(a,h)},c.Projection={},c.Projection.LonLat={project:function(a){return new c.Point(a.lng,a.lat)},unproject:function(a){return new c.LatLng(a.y,a.x)},bounds:c.bounds([-180,-90],[180,90])},c.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(h){var p=Math.PI/180,a=this.MAX_LATITUDE,q=Math.max(Math.min(a,h.lat),-a),o=Math.sin(q*p);return new c.Point(this.R*h.lng*p,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(a){var h=180/Math.PI;return new c.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*h,a.x*h/this.R)},bounds:function(){var a=6378137*Math.PI;return c.bounds([-a,-a],[a,a])}()},c.CRS={latLngToPoint:function(h,o){var a=this.projection.project(h),p=this.scale(o);return this.transformation._transform(a,p)},pointToLatLng:function(h,o){var a=this.scale(o),p=this.transformation.untransform(h,a);return this.projection.unproject(p)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite){return null}var p=this.projection.bounds,a=this.scale(h),q=this.transformation.transform(p.min,a),o=this.transformation.transform(p.max,a);return c.bounds(q,o)},infinite:!1,wrapLatLng:function(h){var o=this.wrapLng?c.Util.wrapNum(h.lng,this.wrapLng,!0):h.lng,a=this.wrapLat?c.Util.wrapNum(h.lat,this.wrapLat,!0):h.lat,p=h.alt;return c.latLng(a,o,p)}},c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,(-1),0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(h,o){var a=o.lng-h.lng,p=o.lat-h.lat;return Math.sqrt(a*a+p*p)},infinite:!0}),c.CRS.Earth=c.extend({},c.CRS,{wrapLng:[-180,180],R:6371000,distance:function(h,q){var a=Math.PI/180,u=h.lat*a,r=q.lat*a,p=Math.sin(u)*Math.sin(r)+Math.cos(u)*Math.cos(r)*Math.cos((q.lng-h.lng)*a);return this.R*Math.acos(Math.min(p,1))}}),c.CRS.EPSG3857=c.extend({},c.CRS.Earth,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:function(){var a=0.5/(Math.PI*c.Projection.SphericalMercator.R);return new c.Transformation(a,0.5,(-a),0.5)}()}),c.CRS.EPSG900913=c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"}),c.CRS.EPSG4326=c.extend({},c.CRS.Earth,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/180,1,-1/180,0.5)}),c.Map=c.Evented.extend({options:{crs:c.CRS.EPSG3857,center:f,zoom:f,minZoom:f,maxZoom:f,layers:[],maxBounds:f,renderer:f,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,h){h=c.setOptions(this,h),this._initContainer(a),this._initLayout(),this._onResize=c.bind(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==f&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==f&&this.setView(c.latLng(h.center),h.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(a,h){return h=h===f?this.getZoom():h,this._resetView(c.latLng(a),h),this},setZoom:function(a,h){return this._loaded?this.setView(this.getCenter(),a,{zoom:h}):(this._zoom=a,this)},zoomIn:function(a,h){return a=a||(c.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,h)},zoomOut:function(a,h){return a=a||(c.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,h)},setZoomAround:function(q,x,p){var y=this.getZoomScale(x),v=this.getSize().divideBy(2),w=q instanceof c.Point?q:this.latLngToContainerPoint(q),o=w.subtract(v).multiplyBy(1-1/y),u=this.containerPointToLatLng(v.add(o));return this.setView(u,x,{zoom:p})},_getBoundsCenterZoom:function(y,w){w=w||{},y=y.getBounds?y.getBounds():c.latLngBounds(y);var u=c.point(w.paddingTopLeft||w.padding||[0,0]),p=c.point(w.paddingBottomRight||w.padding||[0,0]),z=this.getBoundsZoom(y,!1,u.add(p));z="number"==typeof w.maxZoom?Math.min(w.maxZoom,z):z;var o=p.subtract(u).divideBy(2),x=this.project(y.getSouthWest(),z),v=this.project(y.getNorthEast(),z),q=this.unproject(x.add(v).divideBy(2).add(o),z);return{center:q,zoom:z}},fitBounds:function(h,n){if(h=c.latLngBounds(h),!h.isValid()){throw new Error("Bounds are not valid.")}var a=this._getBoundsCenterZoom(h,n);return this.setView(a.center,a.zoom,n)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,h){return this.setView(a,this._zoom,{pan:h})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(c.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=c.latLngBounds(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(h,o){this._enforcingBounds=!0;var a=this.getCenter(),p=this._limitCenter(a,this._zoom,c.latLngBounds(h));return a.equals(p)||this.panTo(p,o),this._enforcingBounds=!1,this},invalidateSize:function(h){if(!this._loaded){return this}h=c.extend({animate:!1,pan:!0},h===!0?{animate:!0}:h);var q=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),u=q.divideBy(2).round(),o=a.divideBy(2).round(),p=u.subtract(o);return p.x||p.y?(h.animate&&h.pan?this.panBy(p):(h.pan&&this._rawPanBy(p),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:q,newSize:a})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(h,n){if(!n){return this}var a=this[h]=new n(this);return this._handlers.push(a),this.options[h]&&a.enable(),this},remove:function(){this._initEvents(!0);try{delete this._container._leaflet}catch(a){this._container._leaflet=f}c.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var h in this._layers){this._layers[h].remove()}return this},createPane:function(h,o){var a="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),p=c.DomUtil.create("div",a,o||this._mapPane);return h&&(this._panes[h]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),n=this.unproject(h.getBottomLeft()),a=this.unproject(h.getTopRight());return new c.LatLngBounds(n,a)},getMinZoom:function(){return this.options.minZoom===f?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===f?this._layersMaxZoom===f?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(C,x,v){C=c.latLngBounds(C),v=c.point(v||[0,0]);var p=this.getZoom()||0,D=this.getMinZoom(),o=this.getMaxZoom(),A=C.getNorthWest(),w=C.getSouthEast(),q=this.getSize().subtract(v),B=this.project(w,p).subtract(this.project(A,p)),z=c.Browser.any3d?this.options.zoomSnap:1,y=Math.min(q.x/B.x,q.y/B.y);return p=this.getScaleZoom(y,p),z&&(p=Math.round(p/(z/100))*(z/100),p=x?Math.ceil(p/z)*z:Math.floor(p/z)*z),Math.max(D,Math.min(o,p))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new c.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,n){var a=this._getTopLeftPoint(h,n);return new c.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===f?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,h){var i=this.options.crs;return h=h===f?this._zoom:h,i.scale(a)/i.scale(h)},getScaleZoom:function(a,h){var i=this.options.crs;return h=h===f?this._zoom:h,i.zoom(a*i.scale(h))},project:function(a,h){return h=h===f?this._zoom:h,this.options.crs.latLngToPoint(c.latLng(a),h)},unproject:function(a,h){return h=h===f?this._zoom:h,this.options.crs.pointToLatLng(c.point(a),h)},layerPointToLatLng:function(a){var h=c.point(a).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(a){var h=this.project(c.latLng(a))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(c.latLng(a))},distance:function(a,h){return this.options.crs.distance(c.latLng(a),c.latLng(h))},containerPointToLayerPoint:function(a){return c.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return c.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var h=this.containerPointToLayerPoint(c.point(a));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(a)))},mouseEventToContainerPoint:function(a){return c.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var h=this._container=c.DomUtil.get(a);if(!h){throw new Error("Map container not found.")}if(h._leaflet){throw new Error("Map container is already initialized.")}c.DomEvent.addListener(h,"scroll",this._onScroll,this),h._leaflet=!0},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&c.Browser.any3d,c.DomUtil.addClass(a,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(c.Browser.ielt9?" leaflet-oldie":"")+(c.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=c.DomUtil.getStyle(a,"position");"absolute"!==h&&"relative"!==h&&"fixed"!==h&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),c.DomUtil.setPosition(this._mapPane,new c.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(c.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),c.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,o){c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));var a=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var p=this._zoom!==o;this._moveStart(p)._move(h,o)._moveEnd(p),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},_move:function(a,h,p){h===f&&(h=this._zoom);var i=this._zoom!==h;return this._zoom=h,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(i||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return c.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(h){if(c.DomEvent){this._targets={},this._targets[c.stamp(this._container)]=this;var a=h?"off":"on";c.DomEvent[a](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&c.DomEvent[a](l,"resize",this._onResize,this),c.Browser.any3d&&this.options.transform3DLimit&&this[a]("moveend",this._onMoveEnd)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=c.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,v){for(var o,w=[],q="mouseout"===v||"mouseover"===v,u=p.target||p.srcElement,h=!1;u;){if(o=this._targets[c.stamp(u)],o&&("click"===v||"preclick"===v)&&!p._simulated&&this._draggableMoved(o)){h=!0;break}if(o&&o.listens(v,!0)){if(q&&!c.DomEvent._isExternalTarget(u,p)){break}if(w.push(o),q){break}}if(u===this._container){break}u=u.parentNode}return w.length||h||q||!c.DomEvent._isExternalTarget(u,p)||(w=[this]),w},_handleDOMEvent:function(a){if(this._loaded&&!c.DomEvent._skipped(a)){var h="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===h&&c.DomUtil.preventOutline(a.target||a.srcElement),this._fireDOMEvent(a,h)}},_fireDOMEvent:function(q,x,p){if("click"===q.type){var y=c.Util.extend({},q);y.type="preclick",this._fireDOMEvent(y,y.type,p)}if(!q._stopped&&(p=(p||[]).concat(this._findEventTargets(q,x)),p.length)){var v=p[0];"contextmenu"===x&&v.listens(x,!0)&&c.DomEvent.preventDefault(q);var w={originalEvent:q};if("keypress"!==q.type){var o=v instanceof c.Marker;w.containerPoint=o?this.latLngToContainerPoint(v.getLatLng()):this.mouseEventToContainerPoint(q),w.layerPoint=this.containerPointToLayerPoint(w.containerPoint),w.latlng=o?v.getLatLng():this.layerPointToLatLng(w.layerPoint)}for(var u=0;u<p.length;u++){if(p[u].fire(x,w,!0),w.originalEvent._stopped||p[u].options.nonBubblingEvents&&c.Util.indexOf(p[u].options.nonBubblingEvents,x)!==-1){return}}}},_draggableMoved:function(a){return a=a.options.draggable?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,h=this._handlers.length;a<h;a++){this._handlers[a].disable()}},whenReady:function(a,h){return this._loaded?a.call(h||this,{target:this}):this.on("load",a,h),this},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)||new c.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,h){var i=a&&h!==f?this._getNewPixelOrigin(a,h):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,n){var a=this.getSize()._divideBy(2);return this.project(h,n)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,o,a){var p=this._getNewPixelOrigin(a,o);return this.project(h,o)._subtract(p)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,v,o){if(!o){return p}var w=this.project(p,v),q=this.getSize().divideBy(2),u=new c.Bounds(w.subtract(q),w.add(q)),h=this._getBoundsOffset(u,o,v);return h.round().equals([0,0])?p:this.unproject(w.add(h),v)},_limitOffset:function(h,o){if(!o){return h}var a=this.getPixelBounds(),p=new c.Bounds(a.min.add(h),a.max.add(h));return h.add(this._getBoundsOffset(p,o))},_getBoundsOffset:function(q,x,p){var y=c.bounds(this.project(x.getNorthEast(),p),this.project(x.getSouthWest(),p)),v=y.min.subtract(q.min),w=y.max.subtract(q.max),o=this._rebound(v.x,-w.x),u=this._rebound(v.y,-w.y);return new c.Point(o,u)},_rebound:function(a,h){return a+h>0?Math.round(a-h)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(h))},_limitZoom:function(h){var o=this.getMinZoom(),a=this.getMaxZoom(),p=c.Browser.any3d?this.options.zoomSnap:1;return p&&(h=Math.round(h/p)*p),Math.max(o,Math.min(a,h))}}),c.map=function(a,h){return new c.Map(a,h)},c.Layer=c.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[c.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[c.stamp(a)],this},_layerAdd:function(a){var h=a.target;h.hasLayer(this)&&(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents&&h.on(this.getEvents(),this),this.onAdd(h),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),h.fire("layeradd",{layer:this}))}}),c.Map.include({addLayer:function(a){var h=c.stamp(a);return this._layers[h]?this:(this._layers[h]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var h=c.stamp(a);return this._layers[h]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),a.getEvents&&this.off(a.getEvents(),a),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return !!a&&c.stamp(a) in this._layers},eachLayer:function(h,n){for(var a in this._layers){h.call(n,this._layers[a])}return this},_addLayers:function(h){h=h?c.Util.isArray(h)?h:[h]:[];for(var n=0,a=h.length;n<a;n++){this.addLayer(h[n])}},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[c.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var h=c.stamp(a);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,i=-(1/0),q=this._getZoomSpan();for(var p in this._zoomBoundLayers){var h=this._zoomBoundLayers[p].options;a=h.minZoom===f?a:Math.min(a,h.minZoom),i=h.maxZoom===f?i:Math.max(i,h.maxZoom)}this._layersMaxZoom=i===-(1/0)?f:i,this._layersMinZoom=a===1/0?f:a,q!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),c.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:c.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(q){var x=Math.PI/180,p=this.R,y=q.lat*x,v=this.R_MINOR/p,w=Math.sqrt(1-v*v),o=w*Math.sin(y),u=Math.tan(Math.PI/4-y/2)/Math.pow((1-o)/(1+o),w/2);return y=-p*Math.log(Math.max(u,1e-10)),new c.Point(q.lng*x*p,y)},unproject:function(A){for(var x,v=180/Math.PI,p=this.R,B=this.R_MINOR/p,o=Math.sqrt(1-B*B),y=Math.exp(-A.y/p),w=Math.PI/2-2*Math.atan(y),q=0,z=0.1;q<15&&Math.abs(z)>1e-7;q++){x=o*Math.sin(w),x=Math.pow((1-x)/(1+x),o/2),z=Math.PI/2-2*Math.atan(y*x)-w,w+=z}return new c.LatLng(w*v,A.x*v/p)}},c.CRS.EPSG3395=c.extend({},c.CRS.Earth,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var a=0.5/(Math.PI*c.Projection.Mercator.R);return new c.Transformation(a,0.5,(-a),0.5)}()}),c.GridLayer=c.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:c.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:f,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){a=c.setOptions(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),c.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(c.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(c.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return j.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof c.Point?a:new c.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==f&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var q,a=this.getPane().children,u=-h(-(1/0),1/0),r=0,p=a.length;r<p;r++){q=a[r].style.zIndex,a[r]!==this._container&&q&&(u=h(u,+q))}isFinite(u)&&(this.options.zIndex=u+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!c.Browser.ielt9){c.DomUtil.setOpacity(this._container,this.options.opacity);var h=+new Date,q=!1,a=!1;for(var u in this._tiles){var o=this._tiles[u];if(o.current&&o.loaded){var p=Math.min(1,(h-o.loaded)/200);c.DomUtil.setOpacity(o.el,p),p<1?q=!0:(o.active&&(a=!0),o.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),q&&(c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=c.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,o=this.options.maxZoom;if(a===f){return f}for(var p in this._levels){this._levels[p].el.children.length||p===a?this._levels[p].el.style.zIndex=o-Math.abs(a-p):(c.DomUtil.remove(this._levels[p].el),this._removeTilesAtZoom(p),delete this._levels[p])}var h=this._levels[a],i=this._map;return h||(h=this._levels[a]={},h.el=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=i.project(i.unproject(i.getPixelOrigin()),a).round(),h.zoom=a,this._setZoomTransform(h,i.getCenter(),i.getZoom()),c.Util.falseFn(h.el.offsetWidth)),this._level=h,h},_pruneTiles:function(){if(this._map){var h,o,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){return void this._removeAllTiles()}for(h in this._tiles){o=this._tiles[h],o.retain=o.current}for(h in this._tiles){if(o=this._tiles[h],o.current&&!o.active){var p=o.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}}for(h in this._tiles){this._tiles[h].retain||this._removeTile(h)}}},_removeTilesAtZoom:function(a){for(var h in this._tiles){this._tiles[h].coords.z===a&&this._removeTile(h)}},_removeAllTiles:function(){for(var a in this._tiles){this._removeTile(a)}},_invalidateAll:function(){for(var a in this._levels){c.DomUtil.remove(this._levels[a].el),delete this._levels[a]}this._removeAllTiles(),this._tileZoom=null},_retainParent:function(A,x,v,p){var B=Math.floor(A/2),o=Math.floor(x/2),y=v-1,w=new c.Point((+B),(+o));w.z=+y;var q=this._tileCoordsToKey(w),z=this._tiles[q];return z&&z.active?(z.retain=!0,!0):(z&&z.loaded&&(z.retain=!0),y>p&&this._retainParent(B,o,y,p))},_retainChildren:function(y,w,u,p){for(var z=2*y;z<2*y+2;z++){for(var o=2*w;o<2*w+2;o++){var x=new c.Point(z,o);x.z=u+1;var v=this._tileCoordsToKey(x),q=this._tiles[v];q&&q.active?q.retain=!0:(q&&q.loaded&&(q.retain=!0),u+1<p&&this._retainChildren(z,o,u+1,p))}}},_resetView:function(a){var h=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,p,u,q){var h=Math.round(p);(this.options.maxZoom!==f&&h>this.options.maxZoom||this.options.minZoom!==f&&h<this.options.minZoom)&&(h=f);var i=this.options.updateWhenZooming&&h!==this._tileZoom;q&&!i||(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==f&&this._update(a),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(a,p)},_setZoomTransforms:function(h,n){for(var a in this._levels){this._setZoomTransform(this._levels[a],h,n)}},_setZoomTransform:function(h,p,a){var q=this._map.getZoomScale(a,h.zoom),o=h.origin.multiplyBy(q).subtract(this._map._getNewPixelOrigin(p,a)).round();c.Browser.any3d?c.DomUtil.setTransform(h.el,o,q):c.DomUtil.setPosition(h.el,o)},_resetGrid:function(){var h=this._map,p=h.options.crs,a=this._tileSize=this.getTileSize(),r=this._tileZoom,q=this._map.getPixelWorldBounds(this._tileZoom);q&&(this._globalTileRange=this._pxBoundsToTileRange(q)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,p.wrapLng[0]],r).x/a.x),Math.ceil(h.project([0,p.wrapLng[1]],r).x/a.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([p.wrapLat[0],0],r).y/a.x),Math.ceil(h.project([p.wrapLat[1],0],r).y/a.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._resetView()},_getTiledPixelBounds:function(h){var q=this._map,a=q._animatingZoom?Math.max(q._animateToZoom,q.getZoom()):q.getZoom(),u=q.getZoomScale(a,this._tileZoom),o=q.project(h,this._tileZoom).floor(),p=q.getSize().divideBy(2*u);return new c.Bounds(o.subtract(p),o.add(p))},_update:function(G){var o=this._map;if(o){var H=o.getZoom();if(G===f&&(G=o.getCenter()),this._tileZoom!==f){var e=this._getTiledPixelBounds(G),C=this._pxBoundsToTileRange(e),x=C.getCenter(),w=[],F=this.options.keepBuffer,B=new c.Bounds(C.getBottomLeft().subtract([F,-F]),C.getTopRight().add([F,-F]));for(var A in this._tiles){var E=this._tiles[A].coords;E.z===this._tileZoom&&B.contains(c.point(E.x,E.y))||(this._tiles[A].current=!1)}if(Math.abs(H-this._tileZoom)>1){return void this._setView(G,H)}for(var q=C.min.y;q<=C.max.y;q++){for(var i=C.min.x;i<=C.max.x;i++){var z=new c.Point(i,q);if(z.z=this._tileZoom,this._isValidTile(z)){var y=this._tiles[this._tileCoordsToKey(z)];y?y.current=!0:w.push(z)}}}if(w.sort(function(a,h){return a.distanceTo(x)-h.distanceTo(x)}),0!==w.length){this._loading||(this._loading=!0,this.fire("loading"));var D=j.createDocumentFragment();for(i=0;i<w.length;i++){this._addTile(w[i],D)}this._level.el.appendChild(D)}}}},_isValidTile:function(h){var o=this._map.options.crs;if(!o.infinite){var a=this._globalTileRange;if(!o.wrapLng&&(h.x<a.min.x||h.x>a.max.x)||!o.wrapLat&&(h.y<a.min.y||h.y>a.max.y)){return !1}}if(!this.options.bounds){return !0}var p=this._tileCoordsToBounds(h);return c.latLngBounds(this.options.bounds).overlaps(p)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(p){var v=this._map,o=this.getTileSize(),w=p.scaleBy(o),q=w.add(o),u=v.wrapLatLng(v.unproject(w,p.z)),h=v.wrapLatLng(v.unproject(q,p.z));return new c.LatLngBounds(u,h)},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(h){var n=h.split(":"),a=new c.Point((+n[0]),(+n[1]));return a.z=+n[2],a},_removeTile:function(a){var h=this._tiles[a];h&&(c.DomUtil.remove(h.el),delete this._tiles[a],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){c.DomUtil.addClass(a,"leaflet-tile");var h=this.getTileSize();a.style.width=h.x+"px",a.style.height=h.y+"px",a.onselectstart=c.Util.falseFn,a.onmousemove=c.Util.falseFn,c.Browser.ielt9&&this.options.opacity<1&&c.DomUtil.setOpacity(a,this.options.opacity),c.Browser.android&&!c.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(h,p){var a=this._getTilePos(h),q=this._tileCoordsToKey(h),o=this.createTile(this._wrapCoords(h),c.bind(this._tileReady,this,h));this._initTile(o),this.createTile.length<2&&c.Util.requestAnimFrame(c.bind(this._tileReady,this,h,null,o)),c.DomUtil.setPosition(o,a),this._tiles[q]={el:o,coords:h,current:!0},p.appendChild(o),this.fire("tileloadstart",{tile:o,coords:h})},_tileReady:function(h,o,a){if(this._map){o&&this.fire("tileerror",{error:o,tile:a,coords:h});var p=this._tileCoordsToKey(h);a=this._tiles[p],a&&(a.loaded=+new Date,this._map._fadeAnimated?(c.DomUtil.setOpacity(a.el,0),c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),c.DomUtil.addClass(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:h}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),c.Browser.ielt9||!this._map._fadeAnimated?c.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(c.bind(this._pruneTiles,this),250)))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var h=new c.Point(this._wrapX?c.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?c.Util.wrapNum(a.y,this._wrapY):a.y);return h.z=a.z,h},_pxBoundsToTileRange:function(a){var h=this.getTileSize();return new c.Bounds(a.min.unscaleBy(h).floor(),a.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles){if(!this._tiles[a].loaded){return !1}}return !0}}),c.gridLayer=function(a){return new c.GridLayer(a)},c.TileLayer=c.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,h){this._url=a,h=c.setOptions(this,h),h.detectRetina&&c.Browser.retina&&h.maxZoom>0&&(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom++):(h.zoomOffset++,h.maxZoom--),h.minZoom=Math.max(0,h.minZoom)),"string"==typeof h.subdomains&&(h.subdomains=h.subdomains.split("")),c.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,h){return this._url=a,h||this.redraw(),this},createTile:function(e,a){var h=j.createElement("img");return c.DomEvent.on(h,"load",c.bind(this._tileOnLoad,this,a,h)),c.DomEvent.on(h,"error",c.bind(this._tileOnError,this,a,h)),this.options.crossOrigin&&(h.crossOrigin=""),h.alt="",h.src=this.getTileUrl(e),h},getTileUrl:function(h){var n={r:c.Browser.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-h.y;this.options.tms&&(n.y=a),n["-y"]=a}return c.Util.template(this._url,c.extend(n,this.options))},_tileOnLoad:function(a,h){c.Browser.ielt9?setTimeout(c.bind(a,this,null,h),0):a(null,h)},_tileOnError:function(h,o,a){var p=this.options.errorTileUrl;p&&(o.src=p),h(a,o)},getTileSize:function(){var h=this._map,o=c.GridLayer.prototype.getTileSize.call(this),a=this._tileZoom+this.options.zoomOffset,p=this.options.maxNativeZoom;return null!==p&&a>p?o.divideBy(h.getZoomScale(p,a)).round():o},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this.options,h=this._tileZoom;return a.zoomReverse&&(h=a.maxZoom-h),h+=a.zoomOffset,null!==a.maxNativeZoom?Math.min(h,a.maxNativeZoom):h},_getSubdomain:function(a){var h=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var a,h;for(a in this._tiles){this._tiles[a].coords.z!==this._tileZoom&&(h=this._tiles[a].el,h.onload=c.Util.falseFn,h.onerror=c.Util.falseFn,h.complete||(h.src=c.Util.emptyImageUrl,c.DomUtil.remove(h)))}}}),c.tileLayer=function(a,h){return new c.TileLayer(a,h)},c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,o){this._url=h;var a=c.extend({},this.defaultWmsParams);for(var p in o){p in this.options||(a[p]=o[p])}o=c.setOptions(this,o),a.width=a.height=o.tileSize*(o.detectRetina&&c.Browser.retina?2:1),this.wmsParams=a},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,c.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(h){var q=this._tileCoordsToBounds(h),a=this._crs.project(q.getNorthWest()),u=this._crs.project(q.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===c.CRS.EPSG4326?[u.y,a.x,a.y,u.x]:[a.x,u.y,u.x,a.y]).join(","),p=c.TileLayer.prototype.getTileUrl.call(this,h);return p+c.Util.getParamString(this.wmsParams,p,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(a,h){return c.extend(this.wmsParams,a),h||this.redraw(),this}}),c.tileLayer.wms=function(a,h){return new c.TileLayer.WMS(a,h)},c.ImageOverlay=c.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(h,n,a){this._url=h,this._bounds=c.latLngBounds(n),c.setOptions(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(c.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){c.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=c.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=c.Util.falseFn,a.onmousemove=c.Util.falseFn,a.onload=c.bind(this.fire,this,"load"),this.options.crossOrigin&&(a.crossOrigin=""),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(h){var n=this._map.getZoomScale(h.zoom),a=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),h.zoom,h.center);c.DomUtil.setTransform(this._image,a,n)},_reset:function(){var h=this._image,n=new c.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=n.getSize();c.DomUtil.setPosition(h,n.min),h.style.width=a.x+"px",h.style.height=a.y+"px"},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}}),c.imageOverlay=function(h,n,a){return new c.ImageOverlay(h,n,a)},c.Icon=c.Class.extend({initialize:function(a){c.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(h,o){var a=this._getIconUrl(h);if(!a){if("icon"===h){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var p=this._createImg(a,o&&"IMG"===o.tagName?o:null);return this._setIconStyles(p,h),p},_setIconStyles:function(h,q){var a=this.options,u=a[q+"Size"];"number"==typeof u&&(u=[u,u]);var o=c.point(u),p=c.point("shadow"===q&&a.shadowAnchor||a.iconAnchor||o&&o.divideBy(2,!0));h.className="leaflet-marker-"+q+" "+(a.className||""),p&&(h.style.marginLeft=-p.x+"px",h.style.marginTop=-p.y+"px"),o&&(h.style.width=o.x+"px",h.style.height=o.y+"px")},_createImg:function(e,a){return a=a||j.createElement("img"),a.src=e,a},_getIconUrl:function(a){return c.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),c.icon=function(a){return new c.Icon(a)},c.Icon.Default=c.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(h){var n=h+"Url";if(this.options[n]){return this.options[n]}var a=c.Icon.Default.imagePath;if(!a){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return a+"/marker-"+h+(c.Browser.retina&&"icon"===h?"-2x":"")+".png"}}),c.Icon.Default.imagePath=function(){var e,a,u,q,h=j.getElementsByTagName("script"),p=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,a=h.length;e<a;e++){if(u=h[e].src||"",u.match(p)){return q=u.split(p)[0],(q?q+"/":"")+"images"}}}(),c.Marker=c.Layer.extend({options:{icon:new c.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(a,h){c.setOptions(this,h),this._latlng=c.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._removeIcon(),this._removeShadow()},getEvents:function(){var a={zoom:this.update,viewreset:this.update};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getLatLng:function(){return this._latlng},setLatLng:function(a){var h=this._latlng;return this._latlng=c.latLng(a),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var h=this.options,q="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=h.icon.createIcon(this._icon),u=!1;a!==this._icon&&(this._icon&&this._removeIcon(),u=!0,h.title&&(a.title=h.title),h.alt&&(a.alt=h.alt)),c.DomUtil.addClass(a,q),h.keyboard&&(a.tabIndex="0"),this._icon=a,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=h.icon.createShadow(this._shadow),p=!1;o!==this._shadow&&(this._removeShadow(),p=!0),o&&c.DomUtil.addClass(o,q),this._shadow=o,h.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&p&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),c.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&c.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){c.DomUtil.setPosition(this._icon,a),this._shadow&&c.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(c.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),c.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new c.Handler.MarkerDrag(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;c.DomUtil.setOpacity(this._icon,a),this._shadow&&c.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),c.marker=function(a,h){return new c.Marker(a,h)},c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var a=e&&"DIV"===e.tagName?e:j.createElement("div"),o=this.options;if(a.innerHTML=o.html!==!1?o.html:"",o.bgPos){var h=c.point(o.bgPos);a.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}}),c.divIcon=function(a){return new c.DivIcon(a)},c.Map.mergeOptions({closePopupOnClick:!0}),c.Popup=c.Layer.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,offset:[0,7],autoClose:!0,zoomAnimation:!0,className:"",pane:"popupPane"},initialize:function(a,h){c.setOptions(this,a),this._source=h},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),a._fadeAnimated&&c.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&c.DomUtil.setOpacity(this._container,1),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source.on("preclick",c.DomEvent.stopPropagation))},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._fadeAnimated?(c.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(c.bind(c.DomUtil.remove,c.DomUtil,this._container),200)):c.DomUtil.remove(this._container),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source.off("preclick",c.DomEvent.stopPropagation))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=c.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},isOpen:function(){return !!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._container),this},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var h="leaflet-popup",o=this._container=c.DomUtil.create("div",h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var a=this._closeButton=c.DomUtil.create("a",h+"-close-button",o);a.href="#close",a.innerHTML="&#215;",c.DomEvent.on(a,"click",this._onCloseButtonClick,this)}var p=this._wrapper=c.DomUtil.create("div",h+"-content-wrapper",o);this._contentNode=c.DomUtil.create("div",h+"-content",p),c.DomEvent.disableClickPropagation(p).disableScrollPropagation(this._contentNode).on(p,"contextmenu",c.DomEvent.stopPropagation),this._tipContainer=c.DomUtil.create("div",h+"-tip-container",o),this._tip=c.DomUtil.create("div",h+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var a=this._contentNode,h="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof h){a.innerHTML=h}else{for(;a.hasChildNodes();){a.removeChild(a.firstChild)}a.appendChild(h)}this.fire("contentupdate")}},_updateLayout:function(){var h=this._contentNode,q=h.style;q.width="",q.whiteSpace="nowrap";var a=h.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),q.width=a+1+"px",q.whiteSpace="",q.height="";var u=h.offsetHeight,o=this.options.maxHeight,p="leaflet-popup-scrolled";o&&u>o?(q.height=o+"px",c.DomUtil.addClass(h,p)):c.DomUtil.removeClass(h,p),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),o=c.point(this.options.offset);this._zoomAnimated?c.DomUtil.setPosition(this._container,h):o=o.add(h);var a=this._containerBottom=-o.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=a+"px",this._container.style.left=p+"px"}},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);c.DomUtil.setPosition(this._container,h)},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var B=this._map,x=this._container.offsetHeight,v=this._containerWidth,p=new c.Point(this._containerLeft,-x-this._containerBottom);this._zoomAnimated&&p._add(c.DomUtil.getPosition(this._container));var C=B.layerPointToContainerPoint(p),o=c.point(this.options.autoPanPadding),z=c.point(this.options.autoPanPaddingTopLeft||o),w=c.point(this.options.autoPanPaddingBottomRight||o),q=B.getSize(),A=0,y=0;C.x+v+w.x>q.x&&(A=C.x+v-q.x+w.x),C.x-A-z.x<0&&(A=C.x-z.x),C.y+x+w.y>q.y&&(y=C.y+x-q.y+w.y),C.y-y-z.y<0&&(y=C.y-z.y),(A||y)&&B.fire("autopanstart").panBy([A,y])}},_onCloseButtonClick:function(a){this._close(),c.DomEvent.stop(a)}}),c.popup=function(a,h){return new c.Popup(a,h)},c.Map.include({openPopup:function(h,n,a){return h instanceof c.Popup||(h=new c.Popup(a).setContent(h)),n&&h.setLatLng(n),this.hasLayer(h)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=h,this.addLayer(h))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),c.Layer.include({bindPopup:function(a,h){return a instanceof c.Popup?(c.setOptions(a,h),this._popup=a,a._source=this):(this._popup&&!h||(this._popup=new c.Popup(h,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this._originalPopupOffset=this._popup.options.offset,this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h,n){if(h instanceof c.Layer||(n=h,h=this),h instanceof c.FeatureGroup){for(var a in this._layers){h=this._layers[a];break}}return n||(n=h.getCenter?h.getCenter():h.getLatLng()),this._popup&&this._map&&(this._popup.options.offset=this._popupAnchor(h),this._popup._source=h,this._popup.update(),this._map.openPopup(this._popup,n)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var h=a.layer||a.target;if(this._popup&&this._map){return c.DomEvent.stop(a),h instanceof c.Path?void this.openPopup(a.layer||a.target,a.latlng):void (this._map.hasLayer(this._popup)&&this._popup._source===h?this.closePopup():this.openPopup(h,a.latlng))}},_popupAnchor:function(h){var n=h._getPopupAnchor?h._getPopupAnchor():[0,0],a=this._originalPopupOffset||c.Popup.prototype.options.offset;return c.point(n).add(a)},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),c.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),c.LayerGroup=c.Layer.extend({initialize:function(h){this._layers={};var n,a;if(h){for(n=0,a=h.length;n<a;n++){this.addLayer(h[n])}}},addLayer:function(a){var h=this.getLayerId(a);return this._layers[h]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var h=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(a){return !!a&&(a in this._layers||this.getLayerId(a) in this._layers)},clearLayers:function(){for(var a in this._layers){this.removeLayer(this._layers[a])}return this},invoke:function(h){var o,a,p=Array.prototype.slice.call(arguments,1);for(o in this._layers){a=this._layers[o],a[h]&&a[h].apply(a,p)}return this},onAdd:function(a){for(var h in this._layers){a.addLayer(this._layers[h])}},onRemove:function(a){for(var h in this._layers){a.removeLayer(this._layers[h])}},eachLayer:function(h,n){for(var a in this._layers){h.call(n,this._layers[a])}return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var h in this._layers){a.push(this._layers[h])}return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c.stamp(a)}}),c.layerGroup=function(a){return new c.LayerGroup(a)},c.FeatureGroup=c.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),c.LayerGroup.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),c.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new c.LatLngBounds;for(var n in this._layers){var a=this._layers[n];h.extend(a.getBounds?a.getBounds():a.getLatLng())}return h}}),c.featureGroup=function(a){return new c.FeatureGroup(a)},c.Renderer=c.Layer.extend({options:{padding:0.1},initialize:function(a){c.setOptions(this,a),c.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&c.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){c.DomUtil.remove(this._container)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(y,w){var u=this._map.getZoomScale(w,this._zoom),p=c.DomUtil.getPosition(this._container),z=this._map.getSize().multiplyBy(0.5+this.options.padding),o=this._map.project(this._center,w),x=this._map.project(y,w),v=x.subtract(o),q=z.multiplyBy(-u).add(p).add(z).subtract(v);c.Browser.any3d?c.DomUtil.setTransform(this._container,q,u):c.DomUtil.setPosition(this._container,q)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var h=this.options.padding,n=this._map.getSize(),a=this._map.containerPointToLayerPoint(n.multiplyBy(-h)).round();this._bounds=new c.Bounds(a,a.add(n.multiplyBy(1+2*h)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),c.Map.include({getRenderer:function(a){var h=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this.options.preferCanvas&&c.canvas()||c.svg()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(a){if("overlayPane"===a||a===f){return !1}var h=this._paneRenderers[a];return h===f&&(h=c.SVG&&c.svg({pane:a})||c.Canvas&&c.canvas({pane:a}),this._paneRenderers[a]=h),h}}),c.Path=c.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{zoomend:this._project,moveend:this._update,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return c.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(c.Browser.touch?10:0)}}),c.LineUtil={simplify:function(h,n){if(!n||!h.length){return h.slice()}var a=n*n;return h=this._reducePoints(h,a),h=this._simplifyDP(h,a)},pointToSegmentDistance:function(h,n,a){return Math.sqrt(this._sqClosestPointOnSegment(h,n,a,!0))},closestPointOnSegment:function(h,n,a){return this._sqClosestPointOnSegment(h,n,a)},_simplifyDP:function(i,u){var w=i.length,v=typeof Uint8Array!=f+""?Uint8Array:Array,p=new v(w);p[0]=p[w-1]=1,this._simplifyDPStep(i,p,u,0,w-1);var q,h=[];for(q=0;q<w;q++){p[q]&&h.push(i[q])}return h},_simplifyDPStep:function(z,x,v,u,q){var A,p,y,w=0;for(p=u+1;p<=q-1;p++){y=this._sqClosestPointOnSegment(z[p],z[u],z[q],!0),y>w&&(A=p,w=y)}w>v&&(x[A]=1,this._simplifyDPStep(z,x,v,u,A),this._simplifyDPStep(z,x,v,A,q))},_reducePoints:function(h,q){for(var a=[h[0]],u=1,r=0,p=h.length;u<p;u++){this._sqDist(h[u],h[r])>q&&(a.push(h[u]),r=u)}return r<p-1&&a.push(h[p-1]),a},clipSegment:function(A,y,w,u,q){var B,p,z,x=u?this._lastCode:this._getBitCode(A,w),v=this._getBitCode(y,w);for(this._lastCode=v;;){if(!(x|v)){return[A,y]}if(x&v){return !1}B=x||v,p=this._getEdgeIntersection(A,y,B,w,q),z=this._getBitCode(p,w),B===x?(A=p,x=z):(y=p,v=z)}},_getEdgeIntersection:function(B,x,v,p,C){var o,z,w=x.x-B.x,q=x.y-B.y,A=p.min,y=p.max;return 8&v?(o=B.x+w*(y.y-B.y)/q,z=y.y):4&v?(o=B.x+w*(A.y-B.y)/q,z=A.y):2&v?(o=y.x,z=B.y+q*(y.x-B.x)/w):1&v&&(o=A.x,z=B.y+q*(A.x-B.x)/w),new c.Point(o,z,C)},_getBitCode:function(h,n){var a=0;return h.x<n.min.x?a|=1:h.x>n.max.x&&(a|=2),h.y<n.min.y?a|=4:h.y>n.max.y&&(a|=8),a},_sqDist:function(h,o){var a=o.x-h.x,p=o.y-h.y;return a*a+p*p},_sqClosestPointOnSegment:function(A,x,v,p){var B,o=x.x,y=x.y,w=v.x-o,q=v.y-y,z=w*w+q*q;return z>0&&(B=((A.x-o)*w+(A.y-y)*q)/z,B>1?(o=v.x,y=v.y):B>0&&(o+=w*B,y+=q*B)),w=A.x-o,q=A.y-y,p?w*w+q*q:new c.Point(o,y)}},c.Polyline=c.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,h){c.setOptions(this,h),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return !this._latlngs.length},closestLayerPoint:function(C){for(var x,v,p=1/0,D=null,o=c.LineUtil._sqClosestPointOnSegment,A=0,w=this._parts.length;A<w;A++){for(var q=this._parts[A],B=1,z=q.length;B<z;B++){x=q[B-1],v=q[B];var y=o(C,x,v,!0);y<p&&(p=y,D=o(C,x,v))}}return D&&(D.distance=Math.sqrt(p)),D},getCenter:function(){var z,x,v,u,q,A,p,y=this._rings[0],w=y.length;if(!w){return null}for(z=0,x=0;z<w-1;z++){x+=y[z].distanceTo(y[z+1])/2}if(0===x){return this._map.layerPointToLatLng(y[0])}for(z=0,u=0;z<w-1;z++){if(q=y[z],A=y[z+1],v=q.distanceTo(A),u+=v,u>x){return p=(u-x)/v,this._map.layerPointToLatLng([A.x-p*(A.x-q.x),A.y-p*(A.y-q.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(a,h){return h=h||this._defaultShape(),a=c.latLng(a),h.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new c.LatLngBounds,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return c.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var p=[],a=c.Polyline._flat(h),q=0,o=h.length;q<o;q++){a?(p[q]=c.latLng(h[q]),this._bounds.extend(p[q])):p[q]=this._convertLatLngs(h[q])}return p},_project:function(){var h=new c.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h);var n=this._clickTolerance(),a=new c.Point(n,n);this._bounds.isValid()&&h.isValid()&&(h.min._subtract(a),h.max._add(a),this._pxBounds=h)},_projectLatlngs:function(p,v,o){var w,q,u=p[0] instanceof c.LatLng,h=p.length;if(u){for(q=[],w=0;w<h;w++){q[w]=this._map.latLngToLayerPoint(p[w]),o.extend(q[w])}v.push(q)}else{for(w=0;w<h;w++){this._projectLatlngs(p[w],v,o)}}},_clipPoints:function(){var y=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(y)){if(this.options.noClip){return void (this._parts=this._rings)}var w,u,p,z,o,x,v,q=this._parts;for(w=0,p=0,z=this._rings.length;w<z;w++){for(v=this._rings[w],u=0,o=v.length;u<o-1;u++){x=c.LineUtil.clipSegment(v[u],v[u+1],y,u,!0),x&&(q[p]=q[p]||[],q[p].push(x[0]),x[1]===v[u+1]&&u!==o-2||(q[p].push(x[1]),p++))}}}},_simplifyPoints:function(){for(var h=this._parts,o=this.options.smoothFactor,a=0,p=h.length;a<p;a++){h[a]=c.LineUtil.simplify(h[a],o)}},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),c.polyline=function(a,h){return new c.Polyline(a,h)},c.Polyline._flat=function(a){return !c.Util.isArray(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]},c.PolyUtil={},c.PolyUtil.clipPolygon=function(E,y,w){var p,F,o,B,x,v,D,A,z,C=[1,4,2,8],q=c.LineUtil;for(F=0,D=E.length;F<D;F++){E[F]._code=q._getBitCode(E[F],y)}for(B=0;B<4;B++){for(A=C[B],p=[],F=0,D=E.length,o=D-1;F<D;o=F++){x=E[F],v=E[o],x._code&A?v._code&A||(z=q._getEdgeIntersection(v,x,A,y,w),z._code=q._getBitCode(z,y),p.push(z)):(v._code&A&&(z=q._getEdgeIntersection(v,x,A,y,w),z._code=q._getBitCode(z,y),p.push(z)),p.push(x))}E=p}return E},c.Polygon=c.Polyline.extend({options:{fill:!0},isEmpty:function(){return !this._latlngs.length||!this._latlngs[0].length},getCenter:function(){var C,z,x,v,q,D,p,A,y,w=this._rings[0],B=w.length;if(!B){return null}for(D=p=A=0,C=0,z=B-1;C<B;z=C++){x=w[C],v=w[z],q=x.y*v.x-v.y*x.x,p+=(x.x+v.x)*q,A+=(x.y+v.y)*q,D+=3*q}return y=0===D?w[0]:[p/D,A/D],this._map.layerPointToLatLng(y)},_convertLatLngs:function(h){var n=c.Polyline.prototype._convertLatLngs.call(this,h),a=n.length;return a>=2&&n[0] instanceof c.LatLng&&n[0].equals(n[a-1])&&n.pop(),n},_setLatLngs:function(a){c.Polyline.prototype._setLatLngs.call(this,a),c.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,q=this.options.weight,a=new c.Point(q,q);if(h=new c.Bounds(h.min.subtract(a),h.max.add(a)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(h)){if(this.options.noClip){return void (this._parts=this._rings)}for(var u,o=0,p=this._rings.length;o<p;o++){u=c.PolyUtil.clipPolygon(this._rings[o],h,!0),u.length&&this._parts.push(u)}}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),c.polygon=function(a,h){return new c.Polygon(a,h)},c.Rectangle=c.Polygon.extend({initialize:function(a,h){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),h)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=c.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),c.rectangle=function(a,h){return new c.Rectangle(a,h)},c.CircleMarker=c.Path.extend({options:{fill:!0,radius:10},initialize:function(a,h){c.setOptions(this,h),this._latlng=c.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=c.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var h=a&&a.radius||this._radius;return c.Path.prototype.setStyle.call(this,a),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,o=this._radiusY||h,a=this._clickTolerance(),p=[h+a,o+a];this._pxBounds=new c.Bounds(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),c.circleMarker=function(a,h){return new c.CircleMarker(a,h)},c.Circle=c.CircleMarker.extend({initialize:function(h,n,a){if("number"==typeof n&&(n=c.extend({},a,{radius:n})),c.setOptions(this,n),this._latlng=c.latLng(h),isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new c.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:c.Path.prototype.setStyle,_project:function(){var C=this._latlng.lng,x=this._latlng.lat,v=this._map,p=v.options.crs;if(p.distance===c.CRS.Earth.distance){var D=Math.PI/180,o=this._mRadius/c.CRS.Earth.R/D,A=v.project([x+o,C]),w=v.project([x-o,C]),q=A.add(w).divideBy(2),B=v.unproject(q).lat,z=Math.acos((Math.cos(o*D)-Math.sin(x*D)*Math.sin(B*D))/(Math.cos(x*D)*Math.cos(B*D)))/D;(isNaN(z)||0===z)&&(z=o/Math.cos(Math.PI/180*x)),this._point=q.subtract(v.getPixelOrigin()),this._radius=isNaN(z)?0:Math.max(Math.round(q.x-v.project([B,C-z]).x),1),this._radiusY=Math.max(Math.round(q.y-A.y),1)}else{var y=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(y).x}this._updateBounds()}}),c.circle=function(h,n,a){return new c.Circle(h,n,a)},c.SVG=c.Renderer.extend({getEvents:function(){var a=c.Renderer.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=c.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=c.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){c.Renderer.prototype._update.call(this);var h=this._bounds,n=h.getSize(),a=this._container;this._svgSize&&this._svgSize.equals(n)||(this._svgSize=n,a.setAttribute("width",n.x),a.setAttribute("height",n.y)),c.DomUtil.setPosition(a,h.min),a.setAttribute("viewBox",[h.min.x,h.min.y,n.x,n.y].join(" "))}},_initPath:function(a){var h=a._path=c.SVG.create("path");a.options.className&&c.DomUtil.addClass(h,a.options.className),a.options.interactive&&c.DomUtil.addClass(h,"leaflet-interactive"),this._updateStyle(a)},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){c.DomUtil.remove(a._path),a.removeInteractiveTarget(a._path)},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(h){var n=h._path,a=h.options;n&&(a.stroke?(n.setAttribute("stroke",a.color),n.setAttribute("stroke-opacity",a.opacity),n.setAttribute("stroke-width",a.weight),n.setAttribute("stroke-linecap",a.lineCap),n.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?n.setAttribute("stroke-dasharray",a.dashArray):n.removeAttribute("stroke-dasharray"),a.dashOffset?n.setAttribute("stroke-dashoffset",a.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),a.fill?(n.setAttribute("fill",a.fillColor||a.color),n.setAttribute("fill-opacity",a.fillOpacity),n.setAttribute("fill-rule",a.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(a,h){this._setPath(a,c.SVG.pointsToPath(a._parts,h))},_updateCircle:function(h){var q=h._point,a=h._radius,u=h._radiusY||a,r="a"+a+","+u+" 0 1,0 ",p=h._empty()?"M0 0":"M"+(q.x-a)+","+q.y+r+2*a+",0 "+r+2*-a+",0 ";this._setPath(h,p)},_setPath:function(a,h){a._path.setAttribute("d",h)},_bringToFront:function(a){c.DomUtil.toFront(a._path)},_bringToBack:function(a){c.DomUtil.toBack(a._path)}}),c.extend(c.SVG,{create:function(a){return j.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(y,w){var u,p,z,o,x,v,q="";for(u=0,z=y.length;u<z;u++){for(x=y[u],p=0,o=x.length;p<o;p++){v=x[p],q+=(p?"L":"M")+v.x+" "+v.y}q+=w?c.Browser.svg?"z":"x":""}return q||"M0 0"}}),c.Browser.svg=!(!j.createElementNS||!c.SVG.create("svg").createSVGRect),c.svg=function(a){return c.Browser.svg||c.Browser.vml?new c.SVG(a):null},c.Browser.vml=!c.Browser.svg&&function(){try{var e=j.createElement("div");e.innerHTML='<v:shape adj="1"/>';var a=e.firstChild;return a.style.behavior="url(#default#VML)",a&&"object"==typeof a.adj}catch(h){return !1}}(),c.SVG.include(c.Browser.vml?{_initContainer:function(){this._container=c.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||c.Renderer.prototype._update.call(this)},_initPath:function(a){var h=a._container=c.SVG.create("shape");c.DomUtil.addClass(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",a._path=c.SVG.create("path"),h.appendChild(a._path),this._updateStyle(a)},_addPath:function(a){var h=a._container;this._container.appendChild(h),a.options.interactive&&a.addInteractiveTarget(h)},_removePath:function(a){var h=a._container;c.DomUtil.remove(h),a.removeInteractiveTarget(h)},_updateStyle:function(h){var p=h._stroke,a=h._fill,q=h.options,o=h._container;o.stroked=!!q.stroke,o.filled=!!q.fill,q.stroke?(p||(p=h._stroke=c.SVG.create("stroke")),o.appendChild(p),p.weight=q.weight+"px",p.color=q.color,p.opacity=q.opacity,q.dashArray?p.dashStyle=c.Util.isArray(q.dashArray)?q.dashArray.join(" "):q.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=q.lineCap.replace("butt","flat"),p.joinstyle=q.lineJoin):p&&(o.removeChild(p),h._stroke=null),q.fill?(a||(a=h._fill=c.SVG.create("fill")),o.appendChild(a),a.color=q.fillColor||q.color,a.opacity=q.fillOpacity):a&&(o.removeChild(a),h._fill=null)},_updateCircle:function(h){var o=h._point.round(),a=Math.round(h._radius),p=Math.round(h._radiusY||a);this._setPath(h,h._empty()?"M0 0":"AL "+o.x+","+o.y+" "+a+","+p+" 0,23592600")},_setPath:function(a,h){a._path.v=h},_bringToFront:function(a){c.DomUtil.toFront(a._container)},_bringToBack:function(a){c.DomUtil.toBack(a._container)}}:{}),c.Browser.vml&&(c.SVG.create=function(){try{return j.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return j.createElement("<lvml:"+e+' class="lvml">')}}catch(a){return function(e){return j.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),c.Canvas=c.Renderer.extend({onAdd:function(){c.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var a=this._container=j.createElement("canvas");c.DomEvent.on(a,"mousemove",c.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},c.Renderer.prototype._update.call(this);var h=this._bounds,o=this._container,a=h.getSize(),p=c.Browser.retina?2:1;c.DomUtil.setPosition(o,h.min),o.width=p*a.x,o.height=p*a.y,o.style.width=a.x+"px",o.style.height=a.y+"px",c.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y)}},_initPath:function(a){this._updateDashArray(a),this._layers[c.stamp(a)]=a},_addPath:c.Util.falseFn,_removePath:function(a){a._removed=!0,this._requestRedraw(a)},_updatePath:function(a){this._redrawBounds=a._pxBounds,this._draw(!0),a._project(),a._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(h){if(h.options.dashArray){var o,a=h.options.dashArray.split(","),p=[];for(o=0;o<a.length;o++){p.push(Number(a[o]))}h.options._dashArray=p}},_requestRedraw:function(a){if(this._map){var h=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new c.Bounds,this._redrawBounds.extend(a._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(a._pxBounds.max.add([h,h])),this._redrawRequest=this._redrawRequest||c.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(h){this._clear=h;var o,a=this._redrawBounds;this._ctx.save(),a&&(this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,a.max.x-a.min.x,a.max.y-a.min.y),this._ctx.clip());for(var p in this._layers){o=this._layers[p],(!a||o._pxBounds&&o._pxBounds.intersects(a))&&o._updatePath(),h&&o._removed&&(delete o._removed,delete this._layers[p])}this._ctx.restore()},_updatePoly:function(z,x){var v,u,q,A,p=z._parts,y=p.length,w=this._ctx;if(y){for(this._drawnLayers[z._leaflet_id]=z,w.beginPath(),w.setLineDash&&w.setLineDash(z.options&&z.options._dashArray||[]),v=0;v<y;v++){for(u=0,q=p[v].length;u<q;u++){A=p[v][u],w[u?"lineTo":"moveTo"](A.x,A.y)}x&&w.closePath()}this._fillStroke(w,z)}},_updateCircle:function(h){if(!h._empty()){var p=h._point,a=this._ctx,r=h._radius,q=(h._radiusY||r)/r;this._drawnLayers[h._leaflet_id]=h,1!==q&&(a.save(),a.scale(1,q)),a.beginPath(),a.arc(p.x,p.y/q,r,0,2*Math.PI,!1),1!==q&&a.restore(),this._fillStroke(a,h)}},_fillStroke:function(h,o){var a=this._clear,p=o.options;h.globalCompositeOperation=a?"destination-out":"source-over",p.fill&&(h.globalAlpha=a?1:p.fillOpacity,h.fillStyle=p.fillColor||p.color,h.fill(p.fillRule||"evenodd")),p.stroke&&0!==p.weight&&(h.globalAlpha=a?1:p.opacity,o._prevWeight=h.lineWidth=a?o._prevWeight+1:p.weight,h.strokeStyle=p.color,h.lineCap=p.lineCap,h.lineJoin=p.lineJoin,h.stroke())},_onClick:function(h){var p,a=this._map.mouseEventToLayerPoint(h),q=[];for(var o in this._layers){p=this._layers[o],p.options.interactive&&p._containsPoint(a)&&!this._map._draggableMoved(p)&&(c.DomEvent._fakeStop(h),q.push(p))}q.length&&this._fireEvent(q,h)},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var h=this._map.mouseEventToLayerPoint(a);this._handleMouseOut(a,h),this._handleMouseHover(a,h)}},_handleMouseOut:function(h,n){var a=this._hoveredLayer;!a||"mouseout"!==h.type&&a._containsPoint(n)||(c.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([a],h,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(h,o){var a,p;for(a in this._drawnLayers){p=this._drawnLayers[a],p.options.interactive&&p._containsPoint(o)&&(c.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([p],h,"mouseover"),this._hoveredLayer=p)}this._hoveredLayer&&this._fireEvent([this._hoveredLayer],h)},_fireEvent:function(h,n,a){this._map._fireDOMEvent(n,a||n.type,h)},_bringToFront:c.Util.falseFn,_bringToBack:c.Util.falseFn}),c.Browser.canvas=function(){return !!j.createElement("canvas").getContext}(),c.canvas=function(a){return c.Browser.canvas?new c.Canvas(a):null},c.Polyline.prototype._containsPoint=function(y,w){var u,p,z,o,x,v,q=this._clickTolerance();if(!this._pxBounds.contains(y)){return !1}for(u=0,o=this._parts.length;u<o;u++){for(v=this._parts[u],p=0,x=v.length,z=x-1;p<x;z=p++){if((w||0!==p)&&c.LineUtil.pointToSegmentDistance(y,v[z],v[p])<=q){return !0}}}return !1},c.Polygon.prototype._containsPoint=function(A){var x,v,p,B,o,y,w,q,z=!1;if(!this._pxBounds.contains(A)){return !1}for(B=0,w=this._parts.length;B<w;B++){for(x=this._parts[B],o=0,q=x.length,y=q-1;o<q;y=o++){v=x[o],p=x[y],v.y>A.y!=p.y>A.y&&A.x<(p.x-v.x)*(A.y-v.y)/(p.y-v.y)+v.x&&(z=!z)}}return z||c.Polyline.prototype._containsPoint.call(this,A,!0)},c.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},c.GeoJSON=c.FeatureGroup.extend({initialize:function(a,h){c.setOptions(this,h),this._layers={},a&&this.addData(a)},addData:function(p){var v,o,w,q=c.Util.isArray(p)?p:p.features;if(q){for(v=0,o=q.length;v<o;v++){w=q[v],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w)}return this}var u=this.options;if(u.filter&&!u.filter(p)){return this}var h=c.GeoJSON.geometryToLayer(p,u);return h?(h.feature=c.GeoJSON.asFeature(p),h.defaultOptions=h.options,this.resetStyle(h),u.onEachFeature&&u.onEachFeature(p,h),this.addLayer(h)):this},resetStyle:function(a){return a.options=c.Util.extend({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(h){this._setLayerStyle(h,a)},this)},_setLayerStyle:function(a,h){"function"==typeof h&&(h=h(a.feature)),a.setStyle&&a.setStyle(h)}}),c.extend(c.GeoJSON,{geometryToLayer:function(C,x){var v,p,D,o,A="Feature"===C.type?C.geometry:C,w=A?A.coordinates:null,q=[],B=x&&x.pointToLayer,z=x&&x.coordsToLatLng||this.coordsToLatLng;if(!w&&!A){return null}switch(A.type){case"Point":return v=z(w),B?B(C,v):new c.Marker(v);case"MultiPoint":for(D=0,o=w.length;D<o;D++){v=z(w[D]),q.push(B?B(C,v):new c.Marker(v))}return new c.FeatureGroup(q);case"LineString":case"MultiLineString":return p=this.coordsToLatLngs(w,"LineString"===A.type?0:1,z),new c.Polyline(p,x);case"Polygon":case"MultiPolygon":return p=this.coordsToLatLngs(w,"Polygon"===A.type?1:2,z),new c.Polygon(p,x);case"GeometryCollection":for(D=0,o=A.geometries.length;D<o;D++){var y=this.geometryToLayer({geometry:A.geometries[D],type:"Feature",properties:C.properties},x);y&&q.push(y)}return new c.FeatureGroup(q);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new c.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(h,u,a){for(var w,v=[],p=0,q=h.length;p<q;p++){w=u?this.coordsToLatLngs(h[p],u-1,a):(a||this.coordsToLatLng)(h[p]),v.push(w)}return v},latLngToCoords:function(a){return a.alt!==f?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(h,q,a){for(var u=[],o=0,p=h.length;o<p;o++){u.push(q?c.GeoJSON.latLngsToCoords(h[o],q-1,a):c.GeoJSON.latLngToCoords(h[o]))}return !q&&a&&u.push(u[0]),u},getFeature:function(a,h){return a.feature?c.extend({},a.feature,{geometry:h}):c.GeoJSON.asFeature(h)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var b={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(b),c.Circle.include(b),c.CircleMarker.include(b),c.Polyline.prototype.toGeoJSON=function(){var a=!c.Polyline._flat(this._latlngs),h=c.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return c.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:h})},c.Polygon.prototype.toGeoJSON=function(){var h=!c.Polyline._flat(this._latlngs),n=h&&!c.Polyline._flat(this._latlngs[0]),a=c.GeoJSON.latLngsToCoords(this._latlngs,n?2:h?1:0,!0);return h||(a=[a]),c.GeoJSON.getFeature(this,{type:(n?"Multi":"")+"Polygon",coordinates:a})},c.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(h){a.push(h.toGeoJSON().geometry.coordinates)}),c.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===h){return this.toMultiPoint()}var n="GeometryCollection"===h,a=[];return this.eachLayer(function(e){if(e.toGeoJSON){var i=e.toGeoJSON();a.push(n?i.geometry:c.GeoJSON.asFeature(i))}}),n?c.GeoJSON.getFeature(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}}),c.geoJSON=function(a,h){return new c.GeoJSON(a,h)},c.geoJson=c.geoJSON;var k="_leaflet_events";c.DomEvent={on:function(p,v,o,w){if("object"==typeof v){for(var q in v){this._on(p,q,v[q],o)}}else{v=c.Util.splitWords(v);for(var u=0,h=v.length;u<h;u++){this._on(p,v[u],o,w)}}return this},off:function(p,v,o,w){if("object"==typeof v){for(var q in v){this._off(p,q,v[q],o)}}else{v=c.Util.splitWords(v);for(var u=0,h=v.length;u<h;u++){this._off(p,v[u],o,w)}}return this},_on:function(u,o,v,q){var t=o+c.stamp(v)+(q?"_"+c.stamp(q):"");if(u[k]&&u[k][t]){return this}var p=function(e){return v.call(q||u,e||l.event)},a=p;return c.Browser.pointer&&0===o.indexOf("touch")?this.addPointerListener(u,o,p,t):c.Browser.touch&&"dblclick"===o&&this.addDoubleTapListener?this.addDoubleTapListener(u,p,t):"addEventListener" in u?"mousewheel"===o?u.addEventListener("onwheel" in u?"wheel":"mousewheel",p,!1):"mouseenter"===o||"mouseleave"===o?(p=function(e){e=e||l.event,c.DomEvent._isExternalTarget(u,e)&&a(e)},u.addEventListener("mouseenter"===o?"mouseover":"mouseout",p,!1)):("click"===o&&c.Browser.android&&(p=function(e){return c.DomEvent._filterClick(e,a)}),u.addEventListener(o,p,!1)):"attachEvent" in u&&u.attachEvent("on"+o,p),u[k]=u[k]||{},u[k][t]=p,this},_off:function(h,q,a,u){var o=q+c.stamp(a)+(u?"_"+c.stamp(u):""),p=h[k]&&h[k][o];return p?(c.Browser.pointer&&0===q.indexOf("touch")?this.removePointerListener(h,q,o):c.Browser.touch&&"dblclick"===q&&this.removeDoubleTapListener?this.removeDoubleTapListener(h,o):"removeEventListener" in h?"mousewheel"===q?h.removeEventListener("onwheel" in h?"wheel":"mousewheel",p,!1):h.removeEventListener("mouseenter"===q?"mouseover":"mouseleave"===q?"mouseout":q,p,!1):"detachEvent" in h&&h.detachEvent("on"+q,p),h[k][o]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,c.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return c.DomEvent.on(a,"mousewheel",c.DomEvent.stopPropagation)},disableClickPropagation:function(a){var h=c.DomEvent.stopPropagation;return c.DomEvent.on(a,c.Draggable.START.join(" "),h),c.DomEvent.on(a,{click:c.DomEvent._fakeStop,dblclick:h})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return c.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(h,n){if(!n){return new c.Point(h.clientX,h.clientY)}var a=n.getBoundingClientRect();return new c.Point(h.clientX-a.left-n.clientLeft,h.clientY-a.top-n.clientTop)},_wheelPxFactor:c.Browser.win&&c.Browser.chrome?2:c.Browser.gecko?l.devicePixelRatio:1,getWheelDelta:function(a){return a.deltaY&&0===a.deltaMode?-a.deltaY/c.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?18*-a.deltaY:a.deltaY&&2===a.deltaMode?52*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?18*-a.detail:a.detail?a.detail/-32765*52:0},_skipEvents:{},_fakeStop:function(a){c.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var h=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,h},_isExternalTarget:function(h,o){var a=o.relatedTarget;if(!a){return !0}try{for(;a&&a!==h;){a=a.parentNode}}catch(p){return !1}return a!==h},_filterClick:function(h,o){var a=h.timeStamp||h.originalEvent&&h.originalEvent.timeStamp,p=c.DomEvent._lastClick&&a-c.DomEvent._lastClick;return p&&p>100&&p<500||h.target._simulatedClick&&!h._simulated?void c.DomEvent.stop(h):(c.DomEvent._lastClick=a,void o(h))}},c.DomEvent.addListener=c.DomEvent.on,c.DomEvent.removeListener=c.DomEvent.off,c.Draggable=c.Evented.extend({options:{clickTolerance:3},statics:{START:c.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(h,n,a){this._element=h,this._dragStartTarget=n||h,this._preventOutline=a},enable:function(){this._enabled||(c.DomEvent.on(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(c.DomEvent.off(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&(this._moved=!1,!c.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(c.Draggable._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&this._enabled&&(c.Draggable._dragging=!0,this._preventOutline&&c.DomUtil.preventOutline(this._element),c.DomUtil.disableImageDrag(),c.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var a=e.touches?e.touches[0]:e;this._startPoint=new c.Point(a.clientX,a.clientY),c.DomEvent.on(j,c.Draggable.MOVE[e.type],this._onMove,this).on(j,c.Draggable.END[e.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated){if(a.touches&&a.touches.length>1){return void (this._moved=!0)}var o=a.touches&&1===a.touches.length?a.touches[0]:a,e=new c.Point(o.clientX,o.clientY),h=e.subtract(this._startPoint);(h.x||h.y)&&(Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(c.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(h),c.DomUtil.addClass(j.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,l.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),c.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._lastEvent=a,this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),c.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",a)},_onUp:function(e){if(!e._simulated){c.DomUtil.removeClass(j.body,"leaflet-dragging"),this._lastTarget&&(c.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in c.Draggable.MOVE){c.DomEvent.off(j,c.Draggable.MOVE[a],this._onMove,this).off(j,c.Draggable.END[a],this._onUp,this)}c.DomUtil.enableImageDrag(),c.DomUtil.enableTextSelection(),this._moved&&this._moving&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,c.Draggable._dragging=!1}}}),c.Handler=c.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return !!this._enabled}}),c.Map.mergeOptions({dragging:!0,inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0}),c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new c.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}c.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-grab"),c.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=c.latLngBounds(this._map.options.maxBounds);this._offsetLimit=c.bounds(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var n=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(n),n-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",h).fire("drag",h)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,h){return a-(a-h)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;a.x<h.min.x&&(a.x=this._viscousLimit(a.x,h.min.x)),a.y<h.min.y&&(a.y=this._viscousLimit(a.y,h.min.y)),a.x>h.max.x&&(a.x=this._viscousLimit(a.x,h.max.x)),a.y>h.max.y&&(a.y=this._viscousLimit(a.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var h=this._worldWidth,u=Math.round(h/2),a=this._initialWorldOffset,w=this._draggable._newPos.x,v=(w-u+a)%h+u-a,p=(w+u+a)%h-u-a,q=Math.abs(v+a)<Math.abs(p+a)?v:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(D){var x=this._map,v=x.options,p=!v.inertia||this._times.length<2;if(x.fire("dragend",D),p){x.fire("moveend")}else{var E=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1000,A=v.easeLinearity,w=E.multiplyBy(A/o),q=w.distanceTo([0,0]),C=Math.min(v.inertiaMaxSpeed,q),z=w.multiplyBy(C/q),y=C/(v.inertiaDeceleration*A),B=z.multiplyBy(-y/2).round();B.x||B.y?(B=x._limitOffset(B,x.options.maxBounds),c.Util.requestAnimFrame(function(){x.panBy(B,{duration:y,easeLinearity:A,noMoveStart:!0,animate:!0})})):x.fire("moveend")}}}),c.Map.addInitHook("addHandler","dragging",c.Map.Drag),c.Map.mergeOptions({doubleClickZoom:!0}),c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var p=this._map,a=p.getZoom(),r=p.options.zoomDelta,q=h.originalEvent.shiftKey?a-r:a+r;"center"===p.options.doubleClickZoom?p.setZoom(q):p.setZoomAround(h.containerPoint,q)}}),c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom),c.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:50}),c.Map.ScrollWheelZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var o=c.DomEvent.getWheelDelta(h),a=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var p=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c.bind(this._performZoom,this),p),c.DomEvent.stop(h)},_performZoom:function(){var h=this._map,u=h.getZoom(),a=this._map.options.zoomSnap||0;h._stop();var w=this._delta/(4*this._map.options.wheelPxPerZoomLevel),v=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,p=a?Math.ceil(v/a)*a:v,q=h._limitZoom(u+(this._delta>0?p:-p))-u;this._delta=0,this._startTime=null,q&&("center"===h.options.scrollWheelZoom?h.setZoom(u+q):h.setZoomAround(this._lastMousePos,u+q))}}),c.Map.addInitHook("addHandler","scrollWheelZoom",c.Map.ScrollWheelZoom),c.extend(c.DomEvent,{_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",_touchend:c.Browser.msPointer?"MSPointerUp":c.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(C,x,v){function p(h){var r;if(r=c.Browser.pointer?c.DomEvent._pointersCount:h.touches.length,!(r>1)){var a=Date.now(),s=a-(o||a);A=h.touches?h.touches[0]:h,w=s>0&&s<=q,o=a}}function D(){if(w&&!A.cancelBubble){if(c.Browser.pointer){var e,a,h={};for(a in A){e=A[a],h[a]=e&&e.bind?e.bind(A):e}A=h}A.type="dblclick",x(A),o=null}}var o,A,w=!1,q=250,B="_leaflet_",z=this._touchstart,y=this._touchend;return C[B+z+v]=p,C[B+y+v]=D,C[B+"dblclick"+v]=x,C.addEventListener(z,p,!1),C.addEventListener(y,D,!1),c.Browser.edge||C.addEventListener("dblclick",x,!1),this},removeDoubleTapListener:function(h,q){var a="_leaflet_",u=h[a+this._touchstart+q],o=h[a+this._touchend+q],p=h[a+"dblclick"+q];return h.removeEventListener(this._touchstart,u,!1),h.removeEventListener(this._touchend,o,!1),c.Browser.edge||h.removeEventListener("dblclick",p,!1),this}}),c.extend(c.DomEvent,{POINTER_DOWN:c.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:c.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:c.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:c.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(h,o,a,p){return"touchstart"===o?this._addPointerStart(h,a,p):"touchmove"===o?this._addPointerMove(h,a,p):"touchend"===o&&this._addPointerEnd(h,a,p),this},removePointerListener:function(h,o,a){var p=h["_leaflet_"+o+a];return"touchstart"===o?h.removeEventListener(this.POINTER_DOWN,p,!1):"touchmove"===o?h.removeEventListener(this.POINTER_MOVE,p,!1):"touchend"===o&&(h.removeEventListener(this.POINTER_UP,p,!1),h.removeEventListener(this.POINTER_CANCEL,p,!1)),this},_addPointerStart:function(e,a,p){var h=c.bind(function(i){if("mouse"!==i.pointerType&&i.pointerType!==i.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(i.target.tagName)<0)){return}c.DomEvent.preventDefault(i)}this._handlePointer(i,a)},this);if(e["_leaflet_touchstart"+p]=h,e.addEventListener(this.POINTER_DOWN,h,!1),!this._pointerDocListener){var o=c.bind(this._globalPointerUp,this);j.documentElement.addEventListener(this.POINTER_DOWN,c.bind(this._globalPointerDown,this),!0),j.documentElement.addEventListener(this.POINTER_MOVE,c.bind(this._globalPointerMove,this),!0),j.documentElement.addEventListener(this.POINTER_UP,o,!0),j.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(h,n){h.touches=[];for(var a in this._pointers){h.touches.push(this._pointers[a])}h.changedTouches=[h],n(h)},_addPointerMove:function(h,o,a){var p=c.bind(function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&this._handlePointer(e,o)},this);h["_leaflet_touchmove"+a]=p,h.addEventListener(this.POINTER_MOVE,p,!1)},_addPointerEnd:function(h,o,a){var p=c.bind(function(e){this._handlePointer(e,o)},this);h["_leaflet_touchend"+a]=p,h.addEventListener(this.POINTER_UP,p,!1),h.addEventListener(this.POINTER_CANCEL,p,!1)}}),c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23,bounceAtZoomLimits:!0}),c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var a=this._map;if(e.touches&&2===e.touches.length&&!a._animatingZoom&&!this._zooming){var o=a.mouseEventToContainerPoint(e.touches[0]),h=a.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),"center"!==a.options.touchZoom&&(this._pinchStartLatLng=a.containerPointToLatLng(o.add(h)._divideBy(2))),this._startDist=o.distanceTo(h),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),c.DomEvent.on(j,"touchmove",this._onTouchMove,this).on(j,"touchend",this._onTouchEnd,this),c.DomEvent.preventDefault(e)}},_onTouchMove:function(p){if(p.touches&&2===p.touches.length&&this._zooming){var v=this._map,o=v.mouseEventToContainerPoint(p.touches[0]),w=v.mouseEventToContainerPoint(p.touches[1]),q=o.distanceTo(w)/this._startDist;if(this._zoom=v.getScaleZoom(q,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&q<1||this._zoom>v.getMaxZoom()&&q>1)&&(this._zoom=v._limitZoom(this._zoom)),"center"===v.options.touchZoom){if(this._center=this._startLatLng,1===q){return}}else{var u=o._add(w)._divideBy(2)._subtract(this._centerPoint);if(1===q&&0===u.x&&0===u.y){return}this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(u),this._zoom)}this._moved||(v._moveStart(!0),this._moved=!0),c.Util.cancelAnimFrame(this._animRequest);var h=c.bind(v._move,v,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=c.Util.requestAnimFrame(h,this,!0),c.DomEvent.preventDefault(p)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,c.Util.cancelAnimFrame(this._animRequest),c.DomEvent.off(j,"touchmove",this._onTouchMove).off(j,"touchend",this._onTouchEnd),void (this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.snapZoom):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void (this._zooming=!1)}}),c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom),c.Map.mergeOptions({tap:!0,tapTolerance:15}),c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(c.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1){return this._fireClick=!1,void clearTimeout(this._holdTimeout)}var a=e.touches[0],h=a.target;this._startPos=this._newPos=new c.Point(a.clientX,a.clientY),h.tagName&&"a"===h.tagName.toLowerCase()&&c.DomUtil.addClass(h,"leaflet-active"),this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",a))},this),1000),this._simulateEvent("mousedown",a),c.DomEvent.on(j,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),c.DomEvent.off(j,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var a=e.changedTouches[0],h=a.target;h&&h.tagName&&"a"===h.tagName.toLowerCase()&&c.DomUtil.removeClass(h,"leaflet-active"),this._simulateEvent("mouseup",a),this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var h=a.touches[0];this._newPos=new c.Point(h.clientX,h.clientY),this._simulateEvent("mousemove",h)},_simulateEvent:function(a,h){var e=j.createEvent("MouseEvents");e._simulated=!0,h.target._simulatedClick=!0,e.initMouseEvent(a,!0,!0,l,1,h.screenX,h.screenY,h.clientX,h.clientY,!1,!1,!1,!1,0,null),h.target.dispatchEvent(e)}}),c.Browser.touch&&!c.Browser.pointer&&c.Map.addInitHook("addHandler","tap",c.Map.Tap),c.Map.mergeOptions({boxZoom:!0}),c.Map.BoxZoom=c.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){return !(!a.shiftKey||1!==a.which&&1!==a.button)&&(this._resetState(),c.DomUtil.disableTextSelection(),c.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),void c.DomEvent.on(j,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=c.DomUtil.create("div","leaflet-zoom-box",this._container),c.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var n=new c.Bounds(this._point,this._startPoint),a=n.getSize();c.DomUtil.setPosition(this._box,n.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(c.DomUtil.remove(this._box),c.DomUtil.removeClass(this._container,"leaflet-crosshair")),c.DomUtil.enableTextSelection(),c.DomUtil.enableImageDrag(),c.DomEvent.off(j,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){setTimeout(c.bind(this._resetState,this),0);var h=new c.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom),c.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),c.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),c.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=j.body,p=j.documentElement,h=a.scrollTop||p.scrollTop,e=a.scrollLeft||p.scrollLeft;this._map._container.focus(),l.scrollTo(e,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var p,a,r=this._panKeys={},q=this.keyCodes;for(p=0,a=q.left.length;p<a;p++){r[q.left[p]]=[-1*h,0]}for(p=0,a=q.right.length;p<a;p++){r[q.right[p]]=[h,0]}for(p=0,a=q.down.length;p<a;p++){r[q.down[p]]=[0,h]}for(p=0,a=q.up.length;p<a;p++){r[q.up[p]]=[0,-1*h]}},_setZoomDelta:function(h){var p,a,r=this._zoomKeys={},q=this.keyCodes;for(p=0,a=q.zoomIn.length;p<a;p++){r[q.zoomIn[p]]=h}for(p=0,a=q.zoomOut.length;p<a;p++){r[q.zoomOut[p]]=-h}},_addHooks:function(){c.DomEvent.on(j,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(j,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var o,a=h.keyCode,p=this._map;if(a in this._panKeys){if(p._panAnim&&p._panAnim._inProgress){return}o=this._panKeys[a],h.shiftKey&&(o=c.point(o).multiplyBy(3)),p.panBy(o),p.options.maxBounds&&p.panInsideBounds(p.options.maxBounds)}else{if(a in this._zoomKeys){p.setZoom(p.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[a])}else{if(27!==a){return}p.closePopup()}}c.DomEvent.stop(h)}}}),c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard),c.Handler.MarkerDrag=c.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(a,a,(!0))),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),c.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&c.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(h){var p=this._marker,a=p._shadow,q=c.DomUtil.getPosition(p._icon),o=p._map.layerPointToLatLng(q);a&&c.DomUtil.setPosition(a,q),p._latlng=o,h.latlng=o,p.fire("move",h).fire("drag",h)},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),c.Control=c.Class.extend({options:{position:"topright"},initialize:function(a){c.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var h=this._map;return h&&h.removeControl(this),this.options.position=a,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var o=this._container=this.onAdd(h),a=this.getPosition(),p=h._controlCorners[a];return c.DomUtil.addClass(o,"leaflet-control"),a.indexOf("bottom")!==-1?p.insertBefore(o,p.firstChild):p.appendChild(o),this},remove:function(){return this._map?(c.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),c.control=function(a){return new c.Control(a)},c.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function h(e,i){var n=a+e+" "+a+i;o[e+i]=c.DomUtil.create("div",n,p)}var o=this._controlCorners={},a="leaflet-",p=this._controlContainer=c.DomUtil.create("div",a+"control-container",this._container);h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){c.DomUtil.remove(this._controlContainer)}}),c.Control.Zoom=c.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(h){var o="leaflet-control-zoom",a=c.DomUtil.create("div",o+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,o+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,o+"-out",a,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){this._disabled||this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){this._disabled||this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(h,q,a,u,o){var p=c.DomUtil.create("a",a,u);return p.innerHTML=h,p.href="#",p.title=q,c.DomEvent.on(p,"mousedown dblclick",c.DomEvent.stopPropagation).on(p,"click",c.DomEvent.stop).on(p,"click",o,this).on(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var a=this._map,h="leaflet-disabled";c.DomUtil.removeClass(this._zoomInButton,h),c.DomUtil.removeClass(this._zoomOutButton,h),(this._disabled||a._zoom===a.getMinZoom())&&c.DomUtil.addClass(this._zoomOutButton,h),(this._disabled||a._zoom===a.getMaxZoom())&&c.DomUtil.addClass(this._zoomInButton,h)}}),c.Map.mergeOptions({zoomControl:!0}),c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))}),c.control.zoom=function(a){return new c.Control.Zoom(a)},c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){c.setOptions(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=c.DomUtil.create("div","leaflet-control-attribution"),c.DomEvent&&c.DomEvent.disableClickPropagation(this._container);for(var h in a._layers){a._layers[h].getAttribution&&this.addAttribution(a._layers[h].getAttribution())}return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var n in this._attributions){this._attributions[n]&&h.push(n)}var a=[];this.options.prefix&&a.push(this.options.prefix),h.length&&a.push(h.join(", ")),this._container.innerHTML=a.join(" | ")}}}),c.Map.mergeOptions({attributionControl:!0}),c.Map.addInitHook(function(){this.options.attributionControl&&(new c.Control.Attribution).addTo(this)}),c.control.attribution=function(a){return new c.Control.Attribution(a)},c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var o="leaflet-control-scale",a=c.DomUtil.create("div",o),p=this.options;return this._addScales(p,o+"-line",a),h.on(p.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),a},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,n,a){h.metric&&(this._mScale=c.DomUtil.create("div",n,a)),h.imperial&&(this._iScale=c.DomUtil.create("div",n,a))},_update:function(){var h=this._map,n=h.getSize().y/2,a=h.distance(h.containerPointToLatLng([0,n]),h.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(a)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(h){var n=this._getRoundNum(h),a=n<1000?n+" m":n/1000+" km";this._updateScale(this._mScale,a,n/h)},_updateImperial:function(h){var p,a,r,q=3.2808399*h;q>5280?(p=q/5280,a=this._getRoundNum(p),this._updateScale(this._iScale,a+" mi",a/p)):(r=this._getRoundNum(q),this._updateScale(this._iScale,r+" ft",r/q))},_updateScale:function(h,n,a){h.style.width=Math.round(this.options.maxWidth*a)+"px",h.innerHTML=n},_getRoundNum:function(h){var n=Math.pow(10,(Math.floor(h)+"").length-1),a=h/n;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,n*a}}),c.control.scale=function(a){return new c.Control.Scale(a)},c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(h,o,a){c.setOptions(this,a),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var p in h){this._addLayer(h[p],p)}for(p in o){this._addLayer(o[p],p,!0)}},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++){this._layers[a].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(a,h){return this._addLayer(a,h),this._map?this._update():this},addOverlay:function(a,h){return this._addLayer(a,h,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var h=this._getLayer(c.stamp(a));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._form.clientHeight?(c.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):c.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return c.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",o=this._container=c.DomUtil.create("div",h);o.setAttribute("aria-haspopup",!0),c.DomEvent.disableClickPropagation(o),c.Browser.touch||c.DomEvent.disableScrollPropagation(o);var a=this._form=c.DomUtil.create("form",h+"-list");if(this.options.collapsed){c.Browser.android||c.DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this);var p=this._layersLink=c.DomUtil.create("a",h+"-toggle",o);p.href="#",p.title="Layers",c.Browser.touch?c.DomEvent.on(p,"click",c.DomEvent.stop).on(p,"click",this.expand,this):c.DomEvent.on(p,"focus",this.expand,this),c.DomEvent.on(a,"click",function(){setTimeout(c.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this)}else{this.expand()}this._baseLayersList=c.DomUtil.create("div",h+"-base",a),this._separator=c.DomUtil.create("div",h+"-separator",a),this._overlaysList=c.DomUtil.create("div",h+"-overlays",a),o.appendChild(a)},_getLayer:function(a){for(var h=0;h<this._layers.length;h++){if(this._layers[h]&&c.stamp(this._layers[h].layer)===a){return this._layers[h]}}},_addLayer:function(h,n,a){h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:n,overlay:a}),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex))},_update:function(){if(!this._container){return this}c.DomUtil.empty(this._baseLayersList),c.DomUtil.empty(this._overlaysList);var h,p,a,q,o=0;for(a=0;a<this._layers.length;a++){q=this._layers[a],this._addItem(q),p=p||q.overlay,h=h||!q.overlay,o+=q.overlay?0:1}return this.options.hideSingleBase&&(h=h&&o>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=p&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var n=this._getLayer(c.stamp(h.target)),a=n.overlay?"add"===h.type?"overlayadd":"overlayremove":"add"===h.type?"baselayerchange":null;a&&this._map.fire(a,n)},_createRadioElement:function(e,a){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(a?' checked="checked"':"")+"/>",h=j.createElement("div");return h.innerHTML=p,h.firstChild},_addItem:function(p){var o,w=j.createElement("label"),u=this._map.hasLayer(p.layer);p.overlay?(o=j.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=u):o=this._createRadioElement("leaflet-base-layers",u),o.layerId=c.stamp(p.layer),c.DomEvent.on(o,"click",this._onInputClick,this);var v=j.createElement("span");v.innerHTML=" "+p.name;var e=j.createElement("div");w.appendChild(e),e.appendChild(o),e.appendChild(v);var q=p.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){var h,u,a,w=this._form.getElementsByTagName("input"),v=[],p=[];this._handlingClick=!0;for(var q=w.length-1;q>=0;q--){h=w[q],u=this._getLayer(h.layerId).layer,a=this._map.hasLayer(u),h.checked&&!a?v.push(u):!h.checked&&a&&p.push(u)}for(q=0;q<p.length;q++){this._map.removeLayer(p[q])}for(q=0;q<v.length;q++){this._map.addLayer(v[q])}this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,i,q=this._form.getElementsByTagName("input"),p=this._map.getZoom(),h=q.length-1;h>=0;h--){a=q[h],i=this._getLayer(a.layerId).layer,a.disabled=i.options.minZoom!==f&&p<i.options.minZoom||i.options.maxZoom!==f&&p>i.options.maxZoom}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),c.control.layers=function(h,n,a){return new c.Control.Layers(h,n,a)},c.PosAnimation=c.Evented.extend({run:function(h,o,a,p){this.stop(),this._el=h,this._inProgress=!0,this._duration=a||0.25,this._easeOutPower=1/Math.max(p||0.5,0.2),this._startPos=c.DomUtil.getPosition(h),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(h){var n=+new Date-this._startTime,a=1000*this._duration;n<a?this._runFrame(this._easeOut(n/a),h):(this._runFrame(1),this._complete())},_runFrame:function(h,n){var a=this._startPos.add(this._offset.multiplyBy(h));n&&a._round(),c.DomUtil.setPosition(this._el,a),this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),c.Map.include({setView:function(a,i,o){if(i=i===f?this._zoom:this._limitZoom(i),a=this._limitCenter(c.latLng(a),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==f&&(o.zoom=c.extend({animate:o.animate},o.zoom),o.pan=c.extend({animate:o.animate,duration:o.duration},o.pan));var h=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,i,o.zoom):this._tryAnimatedPan(a,o.pan);if(h){return clearTimeout(this._sizeTimer),this}}return this._resetView(a,i),this},panBy:function(h,n){if(h=c.point(h).round(),n=n||{},!h.x&&!h.y){return this.fire("moveend")}if(n.animate!==!0&&!this.getSize().contains(h)){return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this}if(this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,a,n.duration||0.25,n.easeLinearity)}else{this._rawPanBy(h),this.fire("move").fire("moveend")}return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,n){var a=this._getCenterOffset(h)._floor();return !((n&&n.animate)!==!0&&!this.getSize().contains(a))&&(this.panBy(a,n),!0)}}),c.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var g=c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.mobileOpera;g&&c.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),c.DomEvent.on(this._proxy,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),c.Map.include(g?{_createAnimProxy:function(){var a=this._proxy=c.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(o){var h=c.DomUtil.TRANSFORM,p=a.style[h];c.DomUtil.setTransform(a,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),p===a.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var n=this.getCenter(),h=this.getZoom();c.DomUtil.setTransform(a,this.project(n,h),this.getZoomScale(h,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,p,a){if(this._animatingZoom){return !0}if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold){return !1}var q=this.getZoomScale(p),o=this._getCenterOffset(h)._divideBy(1-1/q);return !(a.animate!==!0&&!this.getSize().contains(o))&&(c.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(h,p,!0)},this),!0)},_animateZoom:function(h,o,a,p){a&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=o,c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:o,noUpdate:p}),setTimeout(c.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),c.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),c.Map.include({flyTo:function(E,Q,I){function F(u){var x=u?-1:1,p=u?C:N,L=C*C-N*N+x*q*q*z*z,y=2*p*q*z,v=L/y,w=Math.sqrt(v*v+1)-v,h=w<1e-9?-18:Math.log(w);return h}function G(a){return(Math.exp(a)-Math.exp(-a))/2}function V(a){return(Math.exp(a)+Math.exp(-a))/2}function M(a){return G(a)/V(a)}function K(a){return N*(V(A)/V(A+o*a))}function D(a){return N*(V(A)*M(A+o*a)-G(A))/q}function S(a){return 1-Math.pow(1-a,1.5)}function R(){var a=(Date.now()-U)/i,e=S(a)*B;a<=1?(this._flyToFrame=c.Util.requestAnimFrame(R,this),this._move(this.unproject(W.add(J.subtract(W).multiplyBy(D(e)/z)),O),this.getScaleZoom(N/K(e),O),{flyTo:!0})):this._move(E,Q)._moveEnd(!0)}if(I=I||{},I.animate===!1||!c.Browser.any3d){return this.setView(E,Q,I)}this._stop();var W=this.project(this.getCenter()),J=this.project(E),H=this.getSize(),O=this._zoom;E=c.latLng(E),Q=Q===f?O:Q;var N=Math.max(H.x,H.y),C=N*this.getZoomScale(O,Q),z=J.distanceTo(W)||1,o=1.42,q=o*o,A=F(0),U=Date.now(),B=(F(1)-A)/o,i=I.duration?1000*I.duration:1000*B*0.8;return this._moveStart(!0),R.call(this),this},flyToBounds:function(h,n){var a=this._getBoundsCenterZoom(h,n);return this.flyTo(a.center,a.zoom,n)}}),c.Map.include({_defaultLocateOptions:{timeout:10000,watch:!1},locate:function(h){if(h=this._locateOptions=c.extend({},this._defaultLocateOptions,h),!("geolocation" in navigator)){return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this}var n=c.bind(this._handleGeolocationResponse,this),a=c.bind(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,a,h):navigator.geolocation.getCurrentPosition(n,a,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){var n=h.code,a=h.message||(1===n?"permission denied":2===n?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(y){var w=y.coords.latitude,u=y.coords.longitude,p=new c.LatLng(w,u),z=p.toBounds(y.coords.accuracy),o=this._locateOptions;if(o.setView){var x=this.getBoundsZoom(z);this.setView(p,o.maxZoom?Math.min(x,o.maxZoom):x)}var v={latlng:p,bounds:z,timestamp:y.timestamp};for(var q in y.coords){"number"==typeof y.coords[q]&&(v[q]=y.coords[q])}this.fire("locationfound",v)}})}(window,document);